<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:include="fragments/layout :: head" th:with="pageTitle='Review Eligibility'" th:remove="tag" />
</head>
<body th:with="context='project-management'" class="competition-management finance-checks-overview">
<div th:include="fragments/modals :: modal-overlay" th:remove="tag"/>

<div th:include="fragments/layout :: body-start" th:remove="tag" />
<div th:include="fragments/layout :: global-header" th:remove="tag" />

<main id="content">
    <div th:include="fragments/layout :: main-content-start" th:remove="tag" />
    <div th:include="fragments/layout :: header-sub" th:with="linkTitle='Finance checks',linkClass='link-back',linkUrl=@{/project/{projectId}/finance-check(projectId=${model.projectId})}" th:remove="tag" />

<!--    <div class="page-title">
        <div th:include="fragments/elements :: project-title (projectId=${model.applicationId}, projectName=${model.projectName})" th:remove="tag" />
        <h1 class="heading-xlarge">
            <th:block th:text="${model.organisationName}" />
            <small th:if="${model.organisationName == model.leadPartnerOrganisation}">(Lead Partner)</small>
        </h1>
    </div>

    <h2 class="heading-medium"><th:block th:text="${#numbers.formatInteger(model.financeCheckSummaryResource.projectId,8)}"/> : <th:block th:text="${model.financeCheckSummaryResource.projectName}"/></h2>-->

    <hr/>

<!--    <div th:if="${model.showSpendProfilesGeneratedMessage}" class="success-alert">
        <p><strong th:text="|The finance checks have been approved and profiles generated. ${model.financeCheckSummaryResource.spendProfileGeneratedBy}, ${#temporals.format(model.financeCheckSummaryResource.spendProfileGeneratedDate, 'd MMMM yyyy')}|">Generated by</strong></p>
    </div>-->

    <h2 class="heading-medium">Finances Overview</h2>
<!--    <div class="table-overflow">
        <table class="table-overview">
            <thead>
            <tr>
                <th scope="col">Project duration</th>
                <th scope="col">Total costs</th>
                <th scope="col" class="numeric">% grant</th>
                <th scope="col" class="numeric">Funding sought</th>
                <th scope="col" class="numeric">Other public sector funding</th>
                <th scope="col" class="numeric">Contribution to project</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td th:text="${model.financesOverview.durationInMonths+' months'}" />
                <td class="numeric">&pound; <th:block th:text="${#numbers.formatInteger(model.eligibilityOverview.totalCost,1,'COMMA')}" /></td>
                <td class="numeric" th:text="${#numbers.formatInteger(model.eligibilityOverview.percentageGrant,1,'NONE')+'%'}" />
                <td class="numeric">&pound; <th:block th:text="${#numbers.formatInteger(model.eligibilityOverview.fundingSought,1,'COMMA')}" /></td>
                <td class="numeric">&pound; <th:block th:text="${#numbers.formatInteger(model.eligibilityOverview.otherPublicSectorFunding,1,'COMMA')}" /></td>
                <td class="numeric">&pound; <th:block th:text="${#numbers.formatInteger(model.eligibilityOverview.contributionToProject,1,'COMMA')}" /></td>

            </tr>
            </tbody>
        </table>
    </div>-->

    <form th:action="@{${#ifsUtil.uriWithQueryString(#httpServletRequest)}}" method="post" th:object="${form}">

        <th:block th:unless="${model.isReadOnly()}">
            <h2 class="heading-medium">Approve eligibility</h2>
            <p>After making any necessary changes, eligible costs should be approved.</p>
            <p>If changes are made, make sure the applicant has reviewed and understand all changes before you approve.</p>
            <div class="form-group">
                <label class="block-label selection-button-checkbox" for="project-eligible" data-target="add-rag-rating">
                    <input  id="project-eligible" type="checkbox" th:field="*{confirmEligibilityChecked}" data-disable-button-until-checked="#confirm-button" />These funding costs have been reviewed and are acceptable
                </label>
            </div>
            <div class="form-group" id="add-rag-rating">
                <label for="rag-rating" class="form-label">Please enter the RAG rating for this eligibility review</label>
                <select th:field="*{eligibilityStatus}" id="rag-rating" class="form-control" data-disable-button-until-checked="#confirm-button">
                    <option value="UNSET" th:selected="${form.eligibilityStatus == null}">--</option>
                    <option value="GREEN">Green</option>
                    <option value="AMBER">Amber</option>
                    <option value="RED">Red</option>
                </select>
            </div>
            <button type="button" data-js-modal="modal-confirm-eligibility" class="button" id="confirm-button">Approve eligible costs</button>
            <th:block  th:include="fragments/modals :: modal-confirm-eligibility" />
        </th:block>
        <hr/>
        <button th:if="${model.showSaveAndContinueButton}" class="button-secondary" name="save-and-continue">Save and return to finance checks</button>
        <a th:if="${model.showBackToFinanceCheckButton}" class="button button-secondary" th:href="@{/project/{projectId}/finance-check(projectId=${model.projectId})}">Return to finance checks</a>
    </form>


    <div th:include="fragments/layout :: main-content-end" th:remove="tag" />
</main>

<div th:include="fragments/layout :: footer" th:remove="tag" />
<div th:include="fragments/layout :: body-end" th:remove="tag" />

</body>
</html>
