<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:include="fragments/layout :: head" th:with="pageTitle='Application Dashboard'" th:remove="tag"/>
    <link href="/css/prototype.css" media="screen" rel="stylesheet" type="text/css"/>
</head>
<body th:class="${(param.view != null and param.view[0] == 'full' ? 'app-overview full-width' : 'app-overview ')}">

<div th:include="fragments/layout :: body-start" th:remove="tag"/>
<div th:include="fragments/layout :: global-header" th:remove="tag"/>


<main id="content">
    <div th:include="fragments/layout :: main-content-start" th:remove="tag"/>


    <div class="page-title">
            <div th:include="fragments/elements :: project-title (projectId=${model.projectId}, projectName=${model.projectName})"
             th:remove="tag"/>
        <h1 class="heading-xlarge">Spend Profile</h1>
    </div>

    <div th:if="${model.isMarkAsComplete()}" th:remove="tag">
        <div class="success-alert extra-margin-bottom">
            <p><strong>All project spend profiles have been markAsComplete to Innovate UK</strong></p>
        </div>
    </div>

    <p>This overview shows the spend profile status of each partner in your project.</p>

    <div th:if="${model.isMarkAsComplete()}" th:remove="tag">
        <h2 class="heading-medium">Profile spend</h2>
        <p>All spend profiles have been markAsComplete to Innovate UK and the Monitoring Officer assigned to this
            application. You may view the markAsComplete spend profiles.</p>

        <a href="/prototypes/3100-spend?task=reviewProject&#38;status=Submitted">Total project profile spend</a>

    </div>


    <h2 class="heading-medium">Partner progress</h2>


    <div class="extra-margin-bottom">
        <table>
            <thead>
            <tr>
                <th scope="col" style="width: 50%">Partner</th>
                <th scope="col" style="width: 50%">Progress</th>
            </tr>
            </thead>
            <tbody>

            <tr th:unless="${#lists.isEmpty(model.partnerOrganisations) and partnerSpendProfileProgress != null}"
                th:each="partnerProgress : ${model.partnerSpendProfileProgress}">

                <td>
                    <div th:each="partner : ${model.partnerOrganisations}"
                         th:if="${partner.name.equals(partnerProgress.key) }">
                        <div th:if="${model.markAsComplete}">
                            <a th:href="@{/project/{id}/partner-organisation/{organisationId}/spend-profile/review(id=${model.projectId}, organisationId=${partner.id})}"
                               th:text="${partnerProgress.key}"/>
                        </div>
                        <div th:if="${!model.markAsComplete}">
                            <a th:href="@{/project/{id}/partner-organisation/{organisationId}/spend-profile/review(id=${model.projectId}, organisationId=${partner.id})}"
                               th:text="${partnerProgress.key}"/>
                        </div>

                    </div>
                </td>

                <td th:if="${!partnerProgress.value}">
                    In progress
                </td>
                <div th:if="${partnerProgress.value }" th:remove="tag">
                    <td>
                        <span class="yes">Complete</span>
                    </td>
                </div>

            </tr>

            </tbody>
        </table>
    </div>

    <div th:if="${model.markAsComplete}" th:remove="tag">

        <p class="extra-margin">Please review each partner's spend profile once they are marked as complete. You must
            make sure they fit the timelines of your project plan.</p>

        <a href="/prototypes/3100-spend?task=reviewProject" class="button">Review and submit total project profile
            spend</a>

    </div>


    <!-- END OFHARDCODED PROTOTYPE HTML -->

    <div th:include="fragments/layout :: main-content-end" th:remove="tag"/>
</main>

<div th:include="fragments/layout :: footer" th:remove="tag"/>
<div th:include="fragments/layout :: body-end" th:remove="tag"/>
<script src="/js/ifs_prototype/prototype.js" type="text/javascript"></script>

<script type="text/javascript">
    // <![CDATA[

    // ]]>
</script>
</body>
</html>