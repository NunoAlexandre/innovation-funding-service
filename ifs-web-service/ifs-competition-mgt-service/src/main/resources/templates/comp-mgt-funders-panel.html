<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Application Dashboard'" cache:name="Application-Dashboard" />
</head>
<body th:with="context='comp-management'" class="competition-management application-funders-panel">

<th:block th:insert="fragments/layout :: body-start"   cache:name="body-start" />
<th:block th:insert="fragments/layout :: global-header"   cache:name="global-header" />

<main id="content" class="full-width">
    <th:block th:insert="fragments/layout :: main-content-start"   cache:name="main-content-start" />

  <div class="grid-row">
      <div class="column-two-thirds">
            <div class="page-title">
                <th:block th:insert="fragments/competition-management :: competition-id(competition=${competitionSummary})"  />
                <h1 class="heading-xlarge" th:text="${competitionSummary.competitionName}" />
            </div>
      </div>
      <div class="column-third alignright extra-margin">
        <th:block th:insert="fragments/competition-management :: competition-status(competition=${competitionSummary})"  />
      </div>
  </div>

    <div th:if="${fundingNotDecidedForAllApplications}" class="event-alert">
        <p><span>A funding decision is required for all applications to the competition.</span></p>
    </div>

  <th:block th:insert="fragments/competition-management :: competition-mgt-menu(competitionStatus=${competitionSummary.competitionStatus.name()},competitionId=${competitionSummary.competitionId})"  />

    <div class="grid-row competition-data">
        <div class="column-fifth">
              <th:block th:insert="fragments/competition-management :: info-area"  />
        </div>
        <div class="column-four-fifth">
          <form method="get">
				<input type="hidden" name="tab" th:if="${activeTab != null}" th:value="${activeTab}" />

				<h2 class="bold-large" th:if="${activeTab == 'submitted'}">Applications submitted</h2>
				<h2 class="bold-large" th:if="${activeTab == 'notSubmitted'}">Applications not submitted</h2>


			    <div class="grid-row sort-by">
			        <div class="column-two-thirds">
			          <h3>
			            <span class="heading-large" th:text="${results.totalElements}" /> applications
			          </h3>
			        </div>
			        <div class="column-third alignright">
			          <th:block th:insert="fragments/competition-management :: applications-sort(activeTab=${activeTab},activeSortField=${activeSortField})"  />
			        </div>
			    </div>

			</form>

    <form method="post" id="submit-funding-decision-form" data-autosave="fundingDecision" th:action="@{/competition/{competitionId}/fundingdecision(competitionId=${competitionSummary.getCompetitionId()})}">
      <th:block th:insert="fragments/competition-management :: applications-table(competition=${competitionSummary},results=${results})"  />
      <th:block th:insert="fragments/modals :: modal-publish-funding-decision"  />
      <p class="alignright-button">
        <button id="notify-applicants" type="submit" class="visuallyhidden" name="action" value="notify">Notify applicants</button>
        <button id="save-funding-decision" type="submit" class="button button-secondary no-margin" name="action" value="save">Save</button>
      </p>
    </form>

  </div>
</div>

    <th:block th:insert="fragments/layout :: main-content-end"   cache:name="main-content-end" />
</main>

<th:block th:insert="fragments/layout :: footer"   cache:name="footer" />
<th:block th:insert="fragments/layout :: body-end"   cache:name="body-end" />

</body>
</html>
