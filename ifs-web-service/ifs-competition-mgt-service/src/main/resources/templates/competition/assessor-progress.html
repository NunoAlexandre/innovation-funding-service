<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Assessor progress'" />
</head>
<body th:with="context='comp-management'" class="competition-management">
<th:block th:insert="fragments/layout :: body-start" />
<th:block th:insert="fragments/layout :: global-header" />

<main tabindex="-1" id="content">
    <th:block th:insert="fragments/layout :: main-content-start" />
    <th:block th:insert="fragments/layout :: header-sub"
              th:with="linkTitle='Allocate assessors',
                linkClass='link-back',
                linkUrl=@{/assessment/competition/{competitionId}/assessors(competitionId=${model.competitionId})}" />
    <th:block th:insert="fragments/layout :: page-title"
              th:with="pageTitle='Assessor progress',
                subTitle=|${model.competitionId} : ${model.competitionName}|,
                size='heading-xlarge'" />

    <h2 class="heading-large no-margin" th:text="${model.assessorName}"></h2>

    <h3 class="heading-medium">Innovation area and skills</h3>

    <div class="grid-row">
        <div class="column-half">
            <h4 class="heading-small">Innovation area</h4>
            <ul>
                <li th:each="area : ${model.innovationAreas}" th:text="${area}" />
            </ul>
        </div>
        <div class="column-half">
            <h4 class="heading-small">Type</h4>
            <p th:text="${model.businessType}" />
        </div>
    </div>

    <h2 class="heading-medium" th:text="| Assigned (${#lists.size(model.assigned)}) |"/>

    <div class="table-overflow">
        <table>
            <thead>
                <tr>
                    <th scope="col" class="width-small">Application number</th>
                    <th scope="col" >Title</th>
                    <th scope="col" class="width-large">Lead organisation</th>
                    <th scope="col" class="width-small aligncentre">Assigned</th>
                    <th scope="col" class="width-small aligncentre">Notified</th>
                    <th scope="col" class="width-small aligncentre">Accepted</th>
                    <th scope="col" class="width-small aligncentre">Started</th>
                    <th scope="col" class="width-small aligncentre">Submitted</th>
                    <th scope="col" class="width-small-medium aligncentre">Remove</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="app : ${model.assigned}">
                    <td>
                        <a href="#"
                           th:href="@{/competition/{cid}/application/{aid}(cid=${model.competitionId},aid=${app.applicationId})} + ${originQuery}"
                           th:text="${app.applicationId}">
                        1
                        </a>
                    </td>
                    <td th:text="${app.applicationName}">Application name</td>
                    <td th:text="${app.leadOrganisation}">Lead organisation</td>
                    <td th:text="${app.totalAssessors}" class="aligncentre">3</td>
                    <td class="aligncentre"
                        th:text="${app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).PENDING or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).ACCEPTED or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).OPEN or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).DECIDE_IF_READY_TO_SUBMIT or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).READY_TO_SUBMIT or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).SUBMITTED}
                        ? 'Yes' : '-'">
                        Yes
                    </td>
                    <td class="aligncentre"
                        th:text="${app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).ACCEPTED or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).OPEN or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).DECIDE_IF_READY_TO_SUBMIT or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).READY_TO_SUBMIT or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).SUBMITTED}
                        ? 'Yes' : '-'">
                        Yes
                    </td>
                    <td class="aligncentre"
                        th:text="${app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).OPEN or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).DECIDE_IF_READY_TO_SUBMIT or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).READY_TO_SUBMIT or
                        app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).SUBMITTED}
                        ? 'Yes' : '-'">
                        Yes
                    </td>
                    <td class="aligncentre"
                        th:text="${app.state == T(org.innovateuk.ifs.assessment.resource.AssessmentStates).SUBMITTED} ? 'Yes' : '-'">
                        Yes
                    </td>
                    <td class="aligncentre"><button class="button button-secondary no-margin">Remove</button></td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2 class="heading-medium">Applications</h2>

    <div class="grid-row sorting">
        <div class="column-half">
            <div class="data">
                <span class="bold-xlarge">2</span>
                <span class="bold-small">Applications</span>
            </div>
        </div>
        <div class="column-half alignright">
            <div class="form-group">
                <label for="sort-by">Sort by</label>
                <select id="sort-by" name="sort" class="js-auto-submit form-control">
                    <option value="id">Application no.</option>
                    <option value="appTitle">Title</option>
                    <option value="leadOrg">Lead organisation</option>
                    <option value="assignedApps">Assigned applications</option>
                </select>
            </div>
            <button type="submit" class="button button-secondary no-margin js-hidden">Sort</button>
        </div>
    </div>

    <div class="table-overflow">
        <table>
            <thead>
                <tr>
                    <th scope="col" class="width-small">Application number</th>
                    <th scope="col" >Title</th>
                    <th scope="col" class="width-large">Lead organisation</th>
                    <th scope="col" class="width-small aligncentre">Assigned</th>
                    <th scope="col" class="width-small-medium aligncentre">Remove</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><a href="#">30</a></td>
                    <td>The potential for glucose based contact lens monitoring in the management of type 2 diabetes</td>
                    <td>Wessex University</td>
                    <td class="aligncentre">1</td>
                    <td class="aligncentre"><button class="button button-secondary no-margin">Assign</button></td>
                </tr>
                <tr>
                    <td><a href="#">31</a></td>
                    <td>Mobility problems and the potential for internet enabled zimmer frame</td>
                    <td>Plymouth University</td>
                    <td class="aligncentre">1</td>
                    <td class="aligncentre"><button class="button button-secondary no-margin">Assign</button></td>
                </tr>
            </tbody>
        </table>
    </div>


    <th:block th:insert="fragments/layout :: main-content-end" />
</main>

<th:block th:insert="fragments/layout :: footer" />
<th:block th:insert="fragments/layout :: body-end" />
</body>
</html>
