<!-- =================== Comp setup section - Initial Details (1) ============================== -->

<div th:fragment="comp-setup-navigation(sections, completedStatuses, currentSection, competition)">
    <div th:class="${(param.section != null ? 'visuallyhidden' : '')}">
        <ul class="list-overview">
            <li th:each="(section, iteration : ${sections})" th:if="${section.toString() != 'HOME'}"
                th:classappend="${(section == currentSection) || (currentSection == null and iteration.index==0) ? 'selected' : ''} + '' + ${completedStatuses.contains(section) ? 'marked-as-complete' : ''}">
                <h3 class="heading-small">
                    <a th:href="@{/competition/setup/{competitionId}/section/{sectionPath}(competitionId=${competition.id},sectionPath=${section.path})}"
                        th:text="${section.name}">Section Name</a>
                </h3>
            </li>
        </ul>

        <div class="extra-margin">
            <a href="#" class="button no-margin-right" id="compCTA">Save as in preparation</a>
        </div>
    </div>
</div>

<!-- ===================Comp admin Page title============================== -->
<div th:fragment="comp-admin-page-title-subheading(subtitle, heading, subheading)">
  <div class="page-title">
    <p class="subtitle" th:text="${subtitle}">Sub title</p>
    <h1 class="heading-xlarge" th:text="${heading}">Title here</h1>
  </div>
</div>

<!-- ===================Comp admin Page back button============================== -->
<div th:fragment="setup-home">
    <div class="extra-margin">
        <a class="button button-secondary" th:href="@{/competition/setup/{competitionId}/(competitionId=${competition.id})}">Return to setup overview</a>
    </div>
</div>

<!-- =================Section: application questions=========================== -->

<div th:fragment="application-question(question)">
    <li>
        <div class="grid-row">
            <div class="column-three-quarters">
                <h2 class="heading-medium" th:text="${question.number + '. ' + question.shortTitle}" />
            </div>
            <div class="column-quarter alignright">
                <a th:href="@{'?status=edit-' + ${question.id}}" class="button button-secondary" th:unless="${param.status != null and param.status[0] == 'edit-' + question.id}">Edit</a>
            </div>
        </div>
        <th:block th:unless="${param.status != null and param.status[0] == 'edit-' + question.id}">
            <div class="extra-margin-bottom">
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Question title</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:text="${question.title}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Question subtitle</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:if="${#strings.isEmpty(question.subTitle)}">None</p>
                        <p th:unless="${#strings.isEmpty(question.subTitle)}" th:text="${question.subTitle}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Guidance title</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:text="${question.guidanceTitle}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Guidance</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:utext="${question.guidance}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Words</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p th:text="${question.maxWords}"></p>
                    </div>
                </div>
                <div class="grid-row">
                    <div class="column-quarter">
                        <h3 class="heading-small">Appendix</h3>
                    </div>
                    <div class="column-three-quarters">
                        <p>No</p>
                    </div>
                </div>
            </div>
        </th:block>
        <th:block th:if="${param.status != null and param.status[0] == 'edit-' + question.id}">
            <form method="post" th:object="${competitionSetupForm.questionToUpdate}" action="application/question/update">
                <input type="hidden"
                       th:name="questionToUpdate.id"
                       th:value="${question.id}" />
                <div class="question">
                    <div class="form-group">
                        <label class="form-label" for="question.title">
                            <span class="form-label-bold">Question title</span>
                            <span th:if="${#fields.hasErrors('*{title}')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('*{title}')}" th:text="${err}" />
                            </span>
                        </label>
                        <input th:class="${#fields.hasErrors('title') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                               type="text"
                               th:name="questionToUpdate.title"
                               th:value="${question.title}"
                               maxlength="255"/>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="question.subTitle">
                            <span class="form-label-bold">Question subtitle</span>
                            <span th:if="${#fields.hasErrors('subTitle')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('subTitle')}" th:text="${err}" />
                            </span>
                        </label>
                        <input th:class="${#fields.hasErrors('subTitle') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                               type="text"
                               th:name="questionToUpdate.subTitle"
                               th:value="${question.subTitle}"
                               maxlength="255"/>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="question.guidanceTitle">
                            <span class="form-label-bold">Question guidance title</span>
                            <span th:if="${#fields.hasErrors('title')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('guidanceTitle')}" th:text="${err}" />
                            </span>
                        </label>
                        <input th:class="${#fields.hasErrors('guidanceTitle') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                               type="text"
                               th:name="questionToUpdate.guidanceTitle"
                               th:value="${question.guidanceTitle}"
                               maxlength="255"/>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="question.guidanceTitle">
                            <span class="form-label-bold">Question guidance</span>
                            <span th:if="${#fields.hasErrors('title')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('guidance')}" th:text="${err}" />
                            </span>
                        </label>
                        <div class="textarea-wrapped ">
                            <textarea data-max_words="500"
                                      th:class="${#fields.hasErrors('guidance') ? 'field-error' : ''}"
                                      th:name="questionToUpdate.guidance"
                                      ifs:utext="${question.guidance}">
                            </textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="question.maxWords">
                            <span class="form-label-bold">Max word count</span>
                            <span th:if="${#fields.hasErrors('maxWords')}" th:remove="tag">
                                <span class="error-message"  th:each="err : ${#fields.errors('maxWords')}" th:text="${err}" />
                            </span>
                        </label>
                        <input th:class="${#fields.hasErrors('maxWords') ? 'form-control field-error width-medium' : 'form-control width-medium'}"
                               type="number"
                               th:name="questionToUpdate.maxWords"
                               th:value="${question.maxWords}"/>
                    </div>
                    <div class="grid-row">
                        <div class="column-half">
                            <fieldset class="inline">
                                <legend class="form-label-bold">Is the answer scored?</legend>
                                <label class="block-label">
                                    <input th:name="questionToUpdate.scored" value="1" type="radio" />
                                    Yes
                                </label>
                                <label class="block-label">
                                    <input  th:name="questionToUpdate.scored" value="0" type="radio" />
                                    No
                                </label>
                            </fieldset>
                        </div>
                        <div class="column-half">
                            <fieldset class="inline">
                                <legend class="form-label-bold">Allow appendix?</legend>
                                <label class="block-label">
                                    <input th:name="questionToUpdate.appendix" value="1" type="radio" />
                                    Yes
                                </label>
                                <label class="block-label">
                                    <input th:name="questionToUpdate.appendix" value="0" type="radio" />
                                    No
                                </label>
                            </fieldset>
                        </div>
                    </div>
                </div>
                <div class="alignright">
                    <input type="submit" class="button button-large" value="Save and close"/>
                </div>
            </form>
        </th:block>
    </li>
</div>