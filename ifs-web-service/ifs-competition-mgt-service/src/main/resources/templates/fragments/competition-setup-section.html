
<!-- =================== Comp setup section - Initial Details (1) ============================== -->
<div th:fragment="section-initial">
    <div class="hgroup extra-margin-bottom">
        <h1 class="heading-xlarge no-margin">Initial details</h1>
    </div>
    <div class="panel-indent">
        This will create a new Competition - you will be able to specify more details as you proceed
    </div>

    <form th:action="@{(${editable} ? '' : 'initial/edit')}" method="post" th:object="${competitionSetupForm}" novalidate="novalidate">

        <fieldset th:if="${editable}" id="section-1-edit">

            <legend class="visuallyhidden">Initial details</legend>

            <div th:class="${#fields.hasErrors('title')}? 'form-group error':'form-group'">
                <label class="form-label" for="competitionSetupForm.title">
                    <span class="form-label-bold">Competition title</span>
                    <span th:if="${#fields.hasErrors('title')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('title')}" th:text="${err}" />
                    </span>
                </label>
                <input th:class="${#fields.hasErrors('title') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                       type="text"
                       th:field="${competitionSetupForm.title}"
                       required="required"
                       data-required-errormessage="Please enter a title" />
            </div>





            <div th:class="${#fields.hasErrors('competitionTypeId')}? 'form-group error':'form-group'">
                <label class="form-label" for="competitionTypeId">
                    <span class="form-label-bold">Competition type</span>
                    <span th:if="${#fields.hasErrors('competitionTypeId')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('competitionTypeId')}" th:text="${err}" />
                    </span>
                </label>
                <select class="form-control width-x-large" name="competitionTypeId" id="competitionTypeId" required="required" data-required-errormessage="Please select a competition type">
                    <option value="" disabled="disabled" th:selected="${competitionSetupForm.competitionTypeId == null}">Please select &hellip;</option>
                    <option th:each="(competitionType : ${competitionTypes})" th:attr="data-stateaid=${competitionType.stateAid}" th:text="${competitionType.name}"  th:value="${competitionType.id}" th:selected="${competitionSetupForm.competitionTypeId == competitionType.id}">Competition Type</option>
                </select>
            </div>


            <div th:class="${#fields.hasErrors('innovationSectorCategoryId')}? 'form-group error':'form-group'">
                <label class="form-label" for="innovationSectorCategoryId">
                    <span class="form-label-bold">Innovation sector</span>
                    <span th:if="${#fields.hasErrors('innovationSectorCategoryId')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('innovationSectorCategoryId')}" th:text="${err}" />
                    </span>
                </label>

                <select class="form-control width-x-large" id="innovationSectorCategoryId" name="innovationSectorCategoryId" required="required" data-required-errormessage="Please select an innovation sector">
                    <option value="" disabled="disabled" th:selected="${competitionSetupForm.innovationSectorCategoryId == null}">Please select &hellip;</option>
                    <option th:each="(innovationSector : ${innovationSectors})" th:text="${innovationSector.name}" th:value="${innovationSector.id}" th:selected="${competitionSetupForm.innovationSectorCategoryId == innovationSector.id}">Innovation Sector</option>
                </select>
            </div>

            <div th:class="${#fields.hasErrors('innovationAreaCategoryId')}? 'form-group error':'form-group'">
                <label class="form-label" for="innovationAreaCategoryId">
                    <span class="form-label-bold">Innovation area</span>
                    <span th:if="${#fields.hasErrors('innovationAreaCategoryId')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('innovationAreaCategoryId')}" th:text="${err}" />
                    </span>
                </label>
                <select class="form-control width-x-large" name="innovationAreaCategoryId" id="innovationAreaCategoryId" required="required" data-required-errormessage="Please select an innovation area">
                    <option th:if="${competitionSetupForm.innovationSectorCategoryId == null}" value="innovation sector" disabled="disabled" selected="selected">Please select an innovation sector first &hellip;</option>
                    <option th:unless="${competitionSetupForm.innovationSectorCategoryId == null}" value="" disabled="disabled" th:selected="${competitionSetupForm.innovationAreaCategoryId == null}">Please select &hellip;</option>
                    <option th:unless="${competitionSetupForm.innovationSectorCategoryId == null}" th:each="(innovationArea : ${innovationAreas})" th:text="${innovationArea.name}" th:value="${innovationArea.id}" th:selected="${competitionSetupForm.innovationAreaCategoryId == innovationArea.id}">Innovation Area</option>
                </select>
            </div>


            <fieldset>
                <div id="openingDate" th:class="${#fields.hasErrors('openingDate*')}? 'form-group error':'form-group'">
                  <h3 class="heading-small no-margin">Opening date</h3>
                  <legend>
                      <span class="visuallyhidden">Opening date</span>
                      <span th:if="${#fields.hasErrors('openingDate*')}" th:remove="tag">
                            <span class="error-message"  th:each="err : ${#fields.errors('openingDate*')}" th:text="${err}" />
                      </span>
                  </legend>
                  <div class="date-group js-future-date">
                      <div class="day">
                          <label class="form-label" for="competitionSetupForm.openingDateDay">
                              <div>Day</div>
                          </label>
                          <input th:class="${#fields.hasErrors('openingDateDay') ? 'form-control field-error width-extra-small' : 'form-control width-extra-small'}"
                                 type="number"
                                 placeholder="DD"
                                 required="required"
                                 data-required-errormessage="Please enter an opening day"
                                 th:field="${competitionSetupForm.openingDateDay}" />
                      </div>

                      <div class="month">
                          <label class="form-label" for="competitionSetupForm.openingDateMonth">
                              <span>Month</span>
                          </label>
                          <input th:class="${#fields.hasErrors('openingDateMonth') ? 'form-control field-error width-extra-small' : 'form-control width-extra-small'}"
                                 type="number"
                                 placeholder="MM"
                                 required="required"
                                 data-required-errormessage="Please enter an opening month"
                                 th:field="${competitionSetupForm.openingDateMonth}" />
                      </div>

                      <div class="year">
                          <label class="form-label" for="competitionSetupForm.openingDateYear">
                              <span>Year</span>
                          </label>
                          <input th:class="${#fields.hasErrors('openingDateYear') ? 'form-control field-error width-extra-small' : 'form-control width-extra-small'}"
                                 type="number"
                                 placeholder="YYYY"
                                 required="required"
                                 data-required-errormessage="Please enter an opening year"
                                 th:field="${competitionSetupForm.openingDateYear}" />
                      </div>
                  </div>
                </div>
            </fieldset>

            <div th:class="${#fields.hasErrors('leadTechnologistUserId')}? 'form-group error':'form-group'">
                <label class="form-label" for="leadTechnologistUserId">
                    <span class="form-label-bold">Competition Lead technologist</span>
                    <span th:if="${#fields.hasErrors('leadTechnologistUserId')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('leadTechnologistUserId')}" th:text="${err}" />
                    </span>
                </label>
                <select class="form-control width-x-large" name="leadTechnologistUserId" id="leadTechnologistUserId" required="required" data-required-errormessage="Please select a lead technologist">
                    <option value="" th:selected="${competitionSetupForm.leadTechnologistUserId == null}" disabled="disabled">Please select &hellip;</option>
                    <option th:each="(competitionLeadTechUser : ${competitionLeadTechUsers})" th:text="${competitionLeadTechUser.name}" th:value="${competitionLeadTechUser.id}" th:selected="${competitionSetupForm.leadTechnologistUserId == competitionLeadTechUser.id}">Lead technologist</option>
                </select>
            </div>

            <div th:class="${#fields.hasErrors('executiveUserId')}? 'form-group error':'form-group'">
                <label class="form-label" for="executiveUserId">
                    <span class="form-label-bold">Competition executive</span>
                    <span th:if="${#fields.hasErrors('executiveUserId')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('executiveUserId')}" th:text="${err}" />
                    </span>
                </label>
                <select class="form-control width-medium" name="executiveUserId" id="executiveUserId" required="required" data-required-errormessage="Please select a competition executive">
                    <option value="" disabled="disabled" th:selected="${competitionSetupForm.executiveUserId == null}">Please select &hellip;</option>
                    <option th:each="(competitionExecutiveUser : ${competitionExecutiveUsers})" th:text="${competitionExecutiveUser.name}" th:value="${competitionExecutiveUser.id}" th:selected="${competitionSetupForm.executiveUserId == competitionExecutiveUser.id}">User</option>
                </select>
            </div>




            <div class="form-group" th:attr="aria-hidden=${competitionSetupForm.competitionTypeId == null ? 'true' : 'false'}" id="stateAid">
                <h3 class="heading-small">State aid</h3>
                <p>
                  <span th:each="(competitionType : ${competitionTypes})" th:remove="tag">
                      <span class="yes" th:if="${competitionSetupForm.competitionTypeId == competitionType.id and competitionType.stateAid == true}">Yes</span>
                      <span class="no" th:if="${competitionSetupForm.competitionTypeId == competitionType.id and competitionType.stateAid == false}">No</span>
                  </span>
                </p>
            </div>

            <button class="button">Done</button>
        </fieldset>

        <fieldset th:if="${!editable}" id="section-1-">

            <dl class="standard-definition-list">
                <dt>Competition executive</dt>
                <dd th:each="(competitionExecutiveUser : ${competitionExecutiveUsers})" th:text="${competitionExecutiveUser.name}" th:if="${competitionSetupForm.executiveUserId == competitionExecutiveUser.id}">User</dd>

                <dt>Opening date</dt>
                <dd th:text="${competitionSetupForm.openingDateDay+'/'+competitionSetupForm.openingDateMonth+'/'+competitionSetupForm.openingDateYear}"></dd>

                <dt>Competition Lead technologist</dt>
                <dd th:each="(competitionLeadTechUser : ${competitionLeadTechUsers})" th:text="${competitionLeadTechUser.name}" th:if="${competitionLeadTechUser.id == competitionSetupForm.leadTechnologistUserId}">Lead technologist</dd>

                <dt>Competition title</dt>
                <dd th:text="${competitionSetupForm.title}"></dd>

                <dt>Innovation sector</dt>
                <dd th:each="(innovationSector : ${innovationSectors})" th:if="${innovationSector.id == competitionSetupForm.innovationSectorCategoryId}" th:text="${innovationSector.name}">Innovation Sector</dd>

                <dt>Innovation area</dt>
                <dd th:each="(innovationArea : ${innovationAreas})" th:if="${competitionSetupForm.innovationAreaCategoryId == innovationArea.id}" th:text="${innovationArea.name}">Innovation Area</dd>

                <dt>Competition type</dt>
                <dd th:each="(competitionType : ${competitionTypes})" th:text="${competitionType.name}"  th:if="${competitionType.id == competitionSetupForm.competitionTypeId}">Competition Type</dd>
                <dt>State aid</dt>
                <dd>
                    <span th:each="(competitionType : ${competitionTypes})" th:remove="tag">
                        <span class="yes" th:if="${competitionSetupForm.competitionTypeId == competitionType.id and competitionType.stateAid == true}">Yes</span>
                        <span class="no" th:if="${competitionSetupForm.competitionTypeId == competitionType.id and competitionType.stateAid == false}">No</span>
                    </span>
                </dd>
               </dl>

            <button type="submit" class="button">Edit</button>
        </fieldset>

    </form>
    <ul class="pagination">
        <li class="next">
            <a rel="next" title="Navigate to next part" th:href="@{/competition/setup/{competitionId}/section/{sectionPath}(competitionId=${competition.id},sectionPath='additional')}">
                <span class="pagination-label">Next</span>
                <span class="pagination-part-title">Funding information</span>
            </a>
        </li>
    </ul>


</div>



<!-- =================== Comp setup section - Additional info (2) ============================== -->
<div th:fragment="section-additional">
    <div class="page-title">
        <h1 class="heading-xlarge">Funding information</h1>
    </div>

    <form th:action="@{(${editable} ? '' : 'additional/edit')}" method="post" th:object="${competitionSetupForm}" novalidate="novalidate">

        <fieldset th:if="${editable}">
            <legend class="visuallyhidden">Funding information</legend>
            <div class="grid-row">
                <div class="column-half">
                <div th:class="${#fields.hasErrors('funder')}? 'form-group error':'form-group'">
                    <label class="form-label" for="competitionSetupForm.funder">
                        <span class="form-label-bold">Funder</span>
                        <th:block th:if="${#fields.hasErrors('funder')}">
                              <span class="error-message"  th:each="err : ${#fields.errors('funder')}" th:text="${err}" />
                        </th:block>
                    </label>
                    <input class="form-control width-x-large"
                           th:errorclass="field-error"
                           type="text"
                           th:field="${competitionSetupForm.funder}"
                           maxlength="255"
                           data-maxlength-errormessage="Co-funders has a maximum length of 255 characters" />
                </div>
                </div>

                <div class="column-half">
                    <div th:class="${#fields.hasErrors('funderBudget')}? 'form-group error':'form-group'">
                        <label class="form-label" for="competitionSetupForm.funderBudget">
                            <span class="form-label-bold">Budget</span>
                            <th:block th:if="${#fields.hasErrors('funderBudget')}">
                                <span class="error-message"  th:each="err : ${#fields.errors('funderBudget')}" th:text="${err}" />
                            </th:block>
                        </label>
                        <input th:class="${#fields.hasErrors('funderBudget') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                               type="number" min="0"
                               id="funderBudget"
                               th:field="${competitionSetupForm.funderBudget}" />
                    </div>
                </div>
            </div>

            <div  th:each="(coFunder, iteration : ${competitionSetupForm.coFunders})" class="grid-row" id="co-funder-row-2">
                <div class="column-half">
                    <div th:class="${#fields.hasErrors('coFunders[__${iteration.index}__].coFunder')}? 'form-group error':'form-group'">
                        <label class="form-label visuallyhidden" for="comp-co-funder-${iteration.index}">
                            <span class="form-label-bold">Funder</span>
                        </label>
                        <input class="form-control width-x-large" th:field="${competitionSetupForm.coFunders[__${iteration.index}__].coFunder}"
                               value="" />
                    </div>
                </div>

                <div class="column-half">
                    <div th:class="${#fields.hasErrors('coFunders[__${iteration.index}__].coFunderBudget')}? 'form-group error':'form-group'">
                        <label class="form-label visuallyhidden" for="comp-co-funders-budget-${iteration.index}">
                            <span class="form-label-bold">Budget</span>
                        </label>
                        <input type="number" min="0"  class="form-control width-x-large" th:id="${iteration.index}+'-funderBudget'"
                               th:field="${competitionSetupForm.coFunders[__${iteration.index}__].coFunderBudget}" value="" />
                    </div>
                </div>
            </div>


            <div class="grid-row" id="dynamic-row-pointer">
                <div class="column-half">
                    &nbsp;
                </div>
                <div class="column-half">
                    <p class="heading-small no-margin">Total: <span data-calculation-operations="+" data-calculation-fields="input[id*=funderBudget]" th:text="${competitionSetupForm.totalFunding == 0 ? '' : '&pound;' + #numbers.formatDecimal(competitionSetupForm.totalFunding, 0, 'COMMA', 2, 'POINT')}">£0</span></p>

                    <div class="alignright">
                        <input type="hidden" name="coFunderCount" id="co-funder-count" th:value="${competitionSetupForm.coFundersCount}" />
                        <button class="buttonlink" id="add-cofunder">+Add co-funder</button>
                    </div>
                </div>
            </div>

            <hr />


            <fieldset>

                <legend class="heading-medium">Reporting fields</legend>

                <div th:class="${#fields.hasErrors('pafNumber')}? 'form-group error':'form-group'">
                    <label class="form-label" for="pafNumber">
                        <span class="form-label-bold">PAF number</span>
                    <span th:if="${#fields.hasErrors('pafNumber')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('pafNumber')}" th:text="${err}" />
                    </span>
                    </label>
                    <input th:class="${#fields.hasErrors('pafNumber') ? 'form-control field-error width-large' : 'form-control width-large'}"
                           type="text"
                           th:field="${competitionSetupForm.pafNumber}"
                           required="required"
                           data-required-errormessage="Please enter a PAF number" />
                </div>

                <div th:class="${#fields.hasErrors('budgetCode')}? 'form-group error':'form-group'">
                    <label class="form-label" for="budgetCode">
                        <span class="form-label-bold">Budget code</span>
                    <span th:if="${#fields.hasErrors('budgetCode')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('budgetCode')}" th:text="${err}" />
                    </span>
                    </label>
                    <input th:class="${#fields.hasErrors('budgetCode') ? 'form-control field-error width-large' : 'form-control width-large'}"
                           type="text"
                           th:field="${competitionSetupForm.budgetCode}"
                           required="required"
                           data-required-errormessage="Please enter a budget code" />
                </div>


                <div th:class="${#fields.hasErrors('activityCode')}? 'form-group error':'form-group'">
                    <label class="form-label" for="competitionSetupForm.activityCode">
                        <span class="form-label-bold">Activity code</span>
                        <span th:if="${#fields.hasErrors('activityCode')}" th:remove="tag">
                            <span class="error-message"  th:each="err : ${#fields.errors('activityCode')}" th:text="${err}" />
                        </span>
                    </label>
                    <input th:class="${#fields.hasErrors('activityCode') ? 'form-control field-error width-large' : 'form-control width-large'}"
                    type="text"
                    th:field="${competitionSetupForm.activityCode}"
                    maxlength="255"
                    data-maxlength-errormessage="Activity code has a maximum length of 255 characters" />
                </div>

                <div th:class="${#fields.hasErrors('competitionCode')}? 'form-group error':'form-group'">
                    <label class="form-label" for="competitionCode">
                        <span class="form-label-bold">Competition code</span>
                    <span th:if="${#fields.hasErrors('competitionCode')}" th:remove="tag">
                          <span class="error-message"  th:each="err : ${#fields.errors('competitionCode')}" th:text="${err}" />
                    </span>
                    </label>
                    <input readonly="readonly"
                           th:class="${#fields.hasErrors('competitionCode') ? 'form-control field-error width-large' : 'form-control width-large'}"
                           type="text"
                           th:field="${competitionSetupForm.competitionCode}"
                           required="required"
                           data-required-errormessage="Please generate a competition code"/>
                    <button class="button button-secondary" th:if="${#strings.isEmpty(competitionSetupForm.competitionCode)}" type="button" id="generate-code" th:value="${competition.id}">Generate code</button>
                </div>


            </fieldset>

            <button class="button">Done</button>
        </fieldset>

        <fieldset th:if="${!editable}" id="section-2-">
            <table>
                <thead>
                <tr>
                    <th scope="col">Funder</th>
                    <th scope="col" class="numeric">Budget</th>
                </tr>
                </thead>
                <tfoot>
                <tr>
                    <th>Total</th>
                    <td class="numeric" th:text="${competitionSetupForm.totalFunding == 0 ? '' : '&pound;' + #numbers.formatDecimal(competitionSetupForm.totalFunding, 0, 'COMMA', 2, 'POINT')}">Total</td>
                </tr>
                </tfoot>
                <tbody>
                <tr>
                    <td th:text="${competitionSetupForm.funder}">Funder Name</td>
                    <td class="numeric" th:text="${competitionSetupForm.funderBudget == 0 ? '' : '&pound;' + #numbers.formatDecimal(competitionSetupForm.funderBudget, 0, 'COMMA', 2, 'POINT')}">Funder Budget</td>
                </tr>
                <tr  th:each="(coFunder, iteration : ${competitionSetupForm.coFunders})">
                    <td th:text="${coFunder.coFunder}">Co-Funder Name</td>
                    <td class="numeric" th:text="${'&pound;' + #numbers.formatDecimal(coFunder.coFunderBudget, 0, 'COMMA', 2, 'POINT')}">Co-Funder Budget</td>
                </tr>
                </tbody>
            </table>

            <dl class="standard-definition-list extra-margin">
                <dt>PAF number</dt>
                <dd th:text="${competitionSetupForm.pafNumber}">PAF Number</dd>
                <dt>Budget code</dt>
                <dd th:text="${competitionSetupForm.budgetCode}">Budget Code</dd>
                <dt>Activity code</dt>
                <dd th:text="${competitionSetupForm.activityCode}">Activity Code</dd>
                <dt>Competition code</dt>
                <dd th:text="${competitionSetupForm.competitionCode}">Competition Code</dd>
            </dl>

            <button type="submit" class="button">Edit</button>
        </fieldset>

    </form>
    <ul class="pagination">
        <li class="prev">
            <a rel="prev" title="Navigate to next part" th:href="@{/competition/setup/{competitionId}/section/{sectionPath}(competitionId=${competition.id},sectionPath='initial')}">
                <span class="pagination-label">Previous</span>
                <span class="pagination-part-title">Initial details</span>
            </a>
        </li>
        <li class="next">
            <a rel="next" title="Navigate to next part" th:href="@{/competition/setup/{competitionId}/section/{sectionPath}(competitionId=${competition.id},sectionPath='eligibility')}">
                <span class="pagination-label">Next</span>
                <span class="pagination-part-title">Eligibility</span>
            </a>
        </li>
    </ul>
</div>

<!-- =================== Comp setup section - Eligibility (3) ============================== -->
<div th:fragment="section-eligibility">
    <div class="hgroup extra-margin-bottom">
        <h1 class="heading-xlarge no-margin">Eligibility</h1>
    </div>

    <form th:action="@{(${editable} ? '' : 'eligibility/edit')}" method="post" th:object="${competitionSetupForm}" novalidate="novalidate">

        <fieldset th:if="${editable}" id="section-3-edit">

            <legend class="visuallyhidden">Eligibility</legend>

            <div th:class="${#fields.hasErrors('multipleStream')}? 'form-group error':'form-group'">
                <fieldset class="inline">
                    <legend>
		                <!--<span class="form-label-bold">Stream</span>-->
		                <span class="form-label-bold">Does the competition have multiple stream?</span>
		                <span th:if="${#fields.hasErrors('multipleStream')}" th:remove="tag">
		                      <span class="error-message"  th:each="err : ${#fields.errors('multipleStream')}" th:text="${err}" />
		                </span>
                    </legend>
	                <label class="block-label" for="comp-stream-yes" data-target="competition-stream-name-fields">
	                    <input id="comp-stream-yes" value="yes" type="radio" th:field="*{multipleStream}" required="required" data-required-errormessage="Please select a stream option"></input>
	                Yes
	                </label>
	                <label class="block-label" for="comp-stream-no">
	                    <input id="comp-stream-no" value="no" type="radio" th:field="*{multipleStream}" required="required" data-required-errormessage="Please select a stream option"></input>
	                No
	                </label>
                </fieldset>
            </div>

            <div id="competition-stream-name-fields" class="form-group js-hidden"  th:classappend="${#fields.hasErrors('streamName')}? 'error':''">
                <fieldset class="inline">
                    <legend>
                        <label class="form-label" for="streamName">
                            <span class="form-label-bold">Stream name</span>
	                        <span th:if="${#fields.hasErrors('streamName')}" th:remove="tag">
	                              <span class="error-message"  th:each="err : ${#fields.errors('streamName')}" th:text="${err}" />
	                        </span>
                        </label>
                    </legend>

                    <input th:class="${#fields.hasErrors('streamName') ? 'form-control field-error width-x-large' : 'form-control width-x-large'}"
                           type="text"
                           th:field="*{streamName}"
                           maxlength="255"
                           required="required"
                           data-required-errormessage="A stream name is required"
                           data-maxlength-errormessage="Stream name has a maximum length of 255 characters" />

                </fieldset>
            </div>

            <div th:class="${#fields.hasErrors('singleOrCollaborative')}? 'form-group error':'form-group'">
                <fieldset class="inline">
                    <legend>
                        <span class="form-label-bold">Should applications be from single partner or collaborative projects?</span>
                        <!--<span class="hint">Is this a single or collaborative project?</span>-->
	                    <span th:if="${#fields.hasErrors('singleOrCollaborative')}" th:remove="tag">
	                          <span class="error-message"  th:each="err : ${#fields.errors('singleOrCollaborative')}" th:text="${err}" />
	                    </span>
                    </legend>

                    <label th:each="collaborationLevel : ${collaborationLevels}" class="block-label" th:for="${'single-or-collaborative-' + collaborationLevel.code}">
                        <input th:id="${'single-or-collaborative-' + collaborationLevel.code}" name="singleOrCollaborative" th:value="${collaborationLevel.code}" type="radio" th:checked="${competitionSetupForm.singleOrCollaborative == collaborationLevel.code}" required="required" data-required-errormessage="Please select a collaboration level"></input>
                        <span th:text="${collaborationLevel.name}" th:remove="tag" />
                    </label>
                </fieldset>
            </div>



            <div th:class="${#fields.hasErrors('researchCategoryId')}? 'form-group error':'form-group'">
		        <fieldset class="inline">
		            <legend>
			            <span class="form-label-bold">What research categories are in scope for this competition?</span>
			            <span th:if="${#fields.hasErrors('researchCategoryId')}" th:remove="tag">
	                          <span class="error-message"  th:each="err : ${#fields.errors('researchCategoryId')}" th:text="${err}" />
	                    </span>
	                </legend>

		            <label class="block-label selected" th:each="researchCategory : ${researchCategories}" th:for="${'research-categories-' + researchCategory.id}">
		                <input th:value="${researchCategory.id}" type="checkbox" name="researchCategoryId" th:id="${'research-categories-' + researchCategory.id}" th:checked="${competitionSetupForm.includesResearchCategory(researchCategory.id)}" required="required" data-required-errormessage="Please select at least one research category" />
		                <span th:text="${researchCategory.name}" th:remove="tag" />
		            </label>
		        </fieldset>
		    </div>



            <div th:class="${#fields.hasErrors('leadApplicantType')}? 'form-group error':'form-group'">
               <fieldset class="inline">
					<legend>
					   <span class="form-label-bold">Lead applicant</span>
					   <span class="hint">Select the Lead Applicant type required</span>
					   <span th:if="${#fields.hasErrors('leadApplicantType')}" th:remove="tag">
			             <span class="error-message"  th:each="err : ${#fields.errors('leadApplicantType')}" th:text="${err}" />
					   </span>
					</legend>

					 <label th:each="leadApplicantType : ${leadApplicantTypes}" class="block-label" th:for="${'lead-applicant-type-' + leadApplicantType.code}">
					    <input th:id="${'lead-applicant-type-' + leadApplicantType.code}" name="leadApplicantType" th:value="${leadApplicantType.code}" type="radio" th:checked="${competitionSetupForm.leadApplicantType == leadApplicantType.code}" required="required" data-required-errormessage="Please select a lead applicant type" />
					    <span th:text="${leadApplicantType.name}" th:remove="tag" />
					 </label>
				</fieldset>
            </div>

            <div th:class="${#fields.hasErrors('researchParticipationAmountId')}? 'form-group error':'form-group'">
                <fieldset class="inline">
	                <legend>
	                    <span class="form-label-bold">Research participation</span>
	                    <span class="hint">This indicates the maximum level of Research participation allowed</span>
	                    <span th:if="${#fields.hasErrors('researchParticipationAmountId')}" th:remove="tag">
	                          <span class="error-message"  th:each="err : ${#fields.errors('researchParticipationAmountId')}" th:text="${err}" />
	                    </span>
	                </legend>
	                <select class="form-control width-large" name="researchParticipationAmountId" id="researchParticipation" required="required" data-required-errormessage="Please select a research participation percentage" >
	                    <option th:each="researchParticipationAmount : ${researchParticipationAmounts}" th:text="${researchParticipationAmount.name}" th:value="${researchParticipationAmount.id}" th:selected="${competitionSetupForm.researchParticipationAmountId == researchParticipationAmount.id}">Research participation</option>
	                </select>
                </fieldset>
            </div>

            <button class="button">Done</button>
        </fieldset>

        <fieldset th:if="${!editable}" id="section-3-">

            <dl class="standard-definition-list">
                <dt>Multiple Stream</dt>
                <dd th:text="${#strings.capitalize(competitionSetupForm.multipleStream)}"></dd>

                <div th:if="${'yes' == competitionSetupForm.multipleStream}" th:remove="tag">
                    <dt>Stream name</dt>
                    <dd th:text="${competitionSetupForm.streamName}"></dd>
                </div>

                <dt>Research categories</dt>
                <dd th:text="${researchCategoriesFormatted}"></dd>

                <dt>Single or collaborative?</dt>
                <dd th:each="(collaborationLevel : ${collaborationLevels})" th:if="${collaborationLevel.code == competitionSetupForm.singleOrCollaborative}" th:text="${collaborationLevel.name}">Collaboration level</dd>

                <dt>Lead applicant</dt>
                <dd th:each="(leadApplicantType : ${leadApplicantTypes})" th:if="${leadApplicantType.code == competitionSetupForm.leadApplicantType}" th:text="${leadApplicantType.name}">Lead applicant type</dd>

                <dt>Research participation</dt>
                <dd th:each="(researchParticipationAmount : ${researchParticipationAmounts})" th:if="${researchParticipationAmount.id == competitionSetupForm.researchParticipationAmountId}" th:text="${researchParticipationAmount.name}">Research category</dd>

            </dl>

            <button type="submit" class="button">Edit</button>
        </fieldset>

    </form>
    <ul class="pagination">
        <li class="prev">
            <a rel="prev" title="Navigate to next part" th:href="@{/competition/setup/{competitionId}/section/{sectionPath}(competitionId=${competition.id},sectionPath='additional')}">
                <span class="pagination-label">Previous</span>
                <span class="pagination-part-title">Funding Information</span>
            </a>
        </li>
        <li class="next">
            <a rel="next" title="Navigate to next part" th:href="@{/competition/setup/{competitionId}/section/{sectionPath}(competitionId=${competition.id},sectionPath='milestones')}">
                <span class="pagination-label">Next</span>
                <span class="pagination-part-title">Milestones</span>
            </a>
        </li>
    </ul>
</div>


<div th:fragment="setup-home">
    <div class="extra-margin">
        <a class="button button-secondary" th:href="@{/competition/setup/{competitionId}/(competitionId=${competition.id})}">Return to setup overview</a>
    </div>
</div>


<!-- =================Section: Milestones (4) =========================== -->

<div th:fragment="section-milestones">

    <div class="hgroup extra-margin-bottom">
        <h2>Step 4: Milestones</h2>
    </div>

    <div class="panel-indent">
        Here you can define the Competiton milestones. Submission date will generate other dates. You will be able to edit those, but it will override the dates calculated if you do.
    </div>

    <form th:action="@{(${editable} ? '' : 'milestones/edit')}" method="post" th:object="${competitionSetupForm}" novalidate="novalidate">

        <fieldset th:if="${editable}" id="section-4-edit">
                 <div class="error-summary" th:if="${#fields.hasAnyErrors()}">
                    <h2 class="heading-medium error-summary-heading">
                        Unable to save section
                    </h2>

                    <ul class="error-summary-list">
                        <li th:each="err : ${#fields.allErrors()}" th:text="${err}"></li>
                    </ul>
                </div>

            <legend class="visuallyhidden">Milestones</legend>

            <table>
                <thead>
                <tr>
                    <th scope="col" style="width: 40%" id="milestoneDescription">Milestone</th>
                    <th scope="col" style="width: 10%" id="dateOfWeek">Weekday</th>
                    <th scope="col" style="width: 10%" id="day">Day</th>
                    <th scope="col" style="width: 10%" id="month">Month</th>
                    <th scope="col" style="width: 10%" id="year">Year</th>
                </tr>
                </thead>
                <tbody>
                    <tr class="date-group js-future-date">
                        <tr th:each="milestonesFormEntryList, iterStat : ${competitionSetupForm.milestonesFormEntryList}"
                            name="milestonesFormEntryList" th:value="${iterStat.index}">
                            <td  th:text="${milestonesFormEntryList.milestoneName.milestoneDescription}"></td>
                            <td class="js-addWeekDay" th:text="${milestonesFormEntryList.dayOfWeek}"></td>
                            <td class="day">
                                <input type="number"
                                placeholder="DD"
                                min="1"
                                max="31"
                                required="required"
                                data-required-errormessage="template error"
                                       th:field="*{milestonesFormEntryList[__${iterStat.index}__].day}" />
                            </td>
                            <td class="month">
                                <input type="number"
                                placeholder="MM"
                                min="1"
                                max="12"
                                required="required"
                                data-required-errormessage="template error"
                                       th:field="*{milestonesFormEntryList[__${iterStat.index}__].month}" />
                            </td>
                            <td class="year" >
                                <input type="number"
                                       placeholder="YYYY"
                                       required="required"
                                       data-required-errormessage="template error"
                                       th:field="*{milestonesFormEntryList[__${iterStat.index}__].year}" />
                            </td>
                        </tr>
                    </tr>
                </tbody>
            </table>
            <button class="button extra-margin">Done</button>

        </fieldset>

        <th:block th:if="${!editable}">
            <table>
                <thead>
                    <tr>
                        <th scope="col" style="width: 40%" id="milestoneDescription">Milestone</th>
                        <th scope="col" style="width: 10%" id="dayOfWeek">Weekday</th>
                        <th scope="col" style="width: 10%" id="day">Day</th>
                        <th scope="col" style="width: 10%" id="month">Month</th>
                        <th scope="col" style="width: 10%" id="year">Year</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="milestonesFormEntryList : ${competitionSetupForm.milestonesFormEntryList}" >
                        <td th:text="${milestonesFormEntryList.milestoneName.milestoneDescription}"></td>
                        <td th:text="${milestonesFormEntryList.dayOfWeek}"></td>
                        <td th:text="${milestonesFormEntryList.day}"></td>
                        <td th:text="${milestonesFormEntryList.month}"></td>
                        <td th:text="${milestonesFormEntryList.year}" />
                    </tr>
                </tbody>
            </table>
            <button type="submit" class="button extra-margin">Edit</button>
        </th:block>
    </form>

    <ul class="pagination">
        <li class="prev">
            <a rel="prev" title="Navigate to next part"
               th:href="@{/competition/setup/{competitionId}/section/{sectionPath}(competitionId=${competition.id},sectionPath='eligibility')}">
                <span class="pagination-label">Previous</span>
                <span class="pagination-part-title">Eligibility</span>
            </a>
        </li>
        <li class="next">
            <a rel="next" title="Navigate to next part"
               th:href="@{/competition/setup/{competitionId}/section/{sectionPath}(competitionId=${competition.id},sectionPath='assessors')}">
                <span class="pagination-label">Next</span>
                <span class="pagination-part-title">Assessors</span>
            </a>
        </li>
    </ul>
</div>
