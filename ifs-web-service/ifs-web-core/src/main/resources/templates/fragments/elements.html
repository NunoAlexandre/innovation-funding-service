<!-- ===========================Element: Skip-content=========================== -->

<div th:fragment="skiplink-container">
    <div id="skiplink-container">
      <div>
        <a href="#content" class="skiplink">Skip to main content</a>
      </div>
    </div>
</div>

<!-- ===========================Element: cookie message=========================== -->

<div th:fragment="global-cookie-message">
    <div id="global-cookie-message">
        <p>GOV.UK uses cookies to make the site simpler. <a href="/info/cookies">Find out more about cookies</a></p>
    </div>
</div>

<!-- ===========================Element: alert message=========================== -->

<div th:fragment="global-alert-message">
    <div th:if="${alertMessages}" id="global-alert-message">
        <div th:remove="tag" th:each="alertMessage : ${alertMessages}">
            <div class="event-alert event-warning no-animation">
                <p><span ifs:utext="${alertMessage.message}"></span></p>
            </div>
        </div>
    </div>
</div>


<!-- ===========================Element: Header logo =========================== -->

<div th:fragment="header-logo">
    <div class="header-logo">
        <a href="https://www.gov.uk/" title="Go to the GOV.UK homepage" id="logo" class="content">
          <img th:src="${@mvcResourceUrlProvider.getForLookupPath('/images/gov.uk_logotype_crown_invert_trans.png')}" src="/images/gov.uk_logotype_crown_invert_trans.png?0.19.2" alt="" width="36" height="32" /> GOV.UK
        </a>
    </div>
</div>

<!-- ===========================Element: Header links =========================== -->
<div th:fragment="header-links">
    <a href="/"  id="proposition-name">Innovation Funding Service</a>
    <ul th:if="${#authentication} ? ${#authorization.expression('isAuthenticated()')} : ${false}" id="proposition-links">
        <li th:unless="${hideDashboardLink} == 'true'">
            <a th:href="${userDashboardLink}" th:class="${#httpServletRequest.requestURI == userDashboardLink ? 'active' : ''}" >My dashboard</a>
        </li>
        <li>
            <a th:href="${logoutUrl}">Sign out</a>
        </li>
    </ul>
</div>
<!-- =========================== Element: Competition Deadline =========================== -->
<div th:fragment="competition-deadline">
    <div class="competition-deadline" th:if="${endDate != null}">
        <div class="day">
            <div th:include="fragments/elements :: ordinal-day (date=${endDate})" th:remove="tag" />
        </div>
        <div class="month" th:text="${#temporals.monthName(endDate)}+' deadline'" />
    </div>
</div>

<!-- =========================== Element: simple ordinal day =========================== -->

<div th:fragment="ordinal-day (date)">
    <span th:remove="tag" th:text="${#temporals.day(date)}" />
</div>

<!-- =========================== Element: Application Title =========================== -->
<div th:fragment="application-title (applicationId, applicationName) ">
    <p class="subtitle" th:text="${#numbers.formatInteger(applicationId,8)} + ': ' + ${applicationName} "/>
</div>

<!-- =========================== Element: Competition Title =========================== -->
<div th:fragment="competition-title (competition) ">
    <p class="subtitle" th:text="${#numbers.formatInteger(competition.id,8)} + ': ' + ${competition.name == null ? 'No competition title defined' : competition.name} "/>
</div>

<!-- =========================== Element: Project Title =========================== -->
<div th:fragment="project-title (projectId, projectName) ">
    <p class="subtitle" th:text="${#numbers.formatInteger(projectId,8)} + ': ' + ${projectName} "/>
</div>

<!-- =========================== Element: Competition Closing soon? =========================== -->
<div th:fragment="competition-closing-warning (competition) ">
    <div th:if="${competition.isClosingSoon()}" th:remove="tag">
        <div class="warning-alert">
            Please note that this competition will close shortly. You will not be able to submit after the competition closes and any edits you make will not be saved.
        </div>
    </div>
</div>
<!-- =========================== Element: Pie chart =========================== -->
<div th:fragment="pie-small">
    <div class="pie-container" th:if="${daysLeft != null}">
        <div class="pie small" th:text="${daysPercentage}+'%'"></div>
        <div class="pie-overlay">
            <span class="day" th:text=" (${daysLeft} &lt; 0 ? '0' : ${daysLeft}) ">18</span>
            <span class="visuallyhidden">Days left</span>
        </div>
    </div>
</div>
<div th:fragment="pie">
    <div class="pie-container">
        <div class="pie" th:text="${daysPercentage}+'%'">10%</div>
        <div class="pie-overlay">
            <span class="day" th:text=" (${daysLeft} &lt; 0 ? '0' : ${daysLeft}) ">18</span>
            <span>Days left</span>
        </div>
    </div>
</div>

<!-- =========================== Element: Progress indicator =========================== -->
<div th:fragment="progress-indicator">
    <div th:class="*{size != null} ? 'progress-container '+${size} : 'progress-container'">
        <div class="progress-indicator">
            <div class="progress" th:attr="aria-valuenow=${percentage}" aria-valuemin="0" aria-valuemax="100" role="progressbar" th:style="'width:'+${percentage}+'%'">
                <div>
                    <span th:text="${percentage}+'%'" th:remove="tag"/>
                    <span class="visuallyhidden"> Complete</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- =========================== Element: Notification / event =========================== -->
<div th:fragment="notification">
    <div class="event-alert" th:if="${notifications} and ${!notifications.isEmpty()}" th:with="notification=${notifications.get(0)}, questions=${notifications?.size()>1 ? 'questions' : 'a question'}">
        <p><span th:text="${notification?.assignedByName + ' has assigned ' + questions + ' to you'}"></span></p>
    </div>

    <div th:if="${applicationSaved}" th:unless="${assignedQuestion}" class="event-alert" >
        <p><span>You have saved your field successfully</span></p>
    </div>

    <div th:if="${assignedQuestion}" class="event-alert" >
        <p><span>Question assigned successfully</span></p>
    </div>

    <div th:if="${invitesSend}" class="event-alert">
        <p><span>Invites sent</span></p>
    </div>

    <div th:if="${inviteNotValid}" class="event-alert">
        <p><span>Invite not valid or expired</span></p>
    </div>

    <div th:if="${inviteAlreadyAccepted}" class="event-alert">
        <p><span>Invite already accepted</span></p>
    </div>

    <div th:if="${fileUploaded}" class="event-alert" >
        <p><span>You have uploaded file successfully</span></p>
    </div>

    <div th:if="${fileRemoved}" class="event-alert" >
        <p><span>File has been removed successfully</span></p>
    </div>

</div>

<!-- =========================== Element: Formatted Date =========================== -->
<div  th:fragment="pretty-date (date)" >
    <th:block th:with="today=(${#temporals.createToday()})">
        <th:block th:if="${date.toLocalDate().equals(today)}" th:text="Today" />
        <th:block th:if="${date.toLocalDate().equals(today.minusDays(1))}" th:text="Yesterday" />
        <th:block th:unless="${date.toLocalDate().equals(today)} or ${date.toLocalDate().equals(today.minusDays(1))}">
          <th:block th:text="${#temporals.format(date, 'dd MMMM')}"/> <th:block th:text="${#strings.toLowerCase(#temporals.format(date, 'hh:mma'))}"/>
        </th:block>
    </th:block>
</div>

<!--  ========================== Element: Agree to application terms =============== -->
<div th:fragment="application-agree-to-terms">
 	<div th:class="${#fields.hasErrors('termsAgreed')}? 'form-block error':'form-block'">
        <span th:if="${#fields.hasErrors('termsAgreed')}" th:remove="tag">
            <span class="error-message"  th:each="err : ${#fields.errors('termsAgreed')}" th:text="${err}" />
        </span>
		<label class="block-label selection-button-checkbox" for="agree-terms-page">
        	<input id="agree-terms-page" th:field="${form.termsAgreed}" type="checkbox" value="yes" data-disable-button-until-checked="#mark-all-as-complete" />
            As a member of this consortium I agree to the funding <a target="_blank" th:href="@{/application/terms-and-conditions}">terms and conditions</a> set out by Innovate UK.
		</label>
	</div>
</div>

<!--  ========================== Element: Agree to application terms =============== -->
<div th:fragment="application-agree-to-state-aid">
    <div  th:class="${#fields.hasErrors('stateAidAgreed')}? 'form-block error':'form-block'">
        <span th:if="${#fields.hasErrors('stateAidAgreed')}" th:remove="tag">
            <span class="error-message"  th:each="err : ${#fields.errors('stateAidAgreed')}" th:text="${err}" />
        </span>
        <label class="block-label selection-button-checkbox" for="agree-state-aid-page">
            <input id="agree-state-aid-page" th:field="${form.stateAidAgreed}" type="checkbox" value="yes" data-disable-button-until-checked="#mark-all-as-complete" />
            I confirm that the project costs entered for my organisation are all eligible.
        </label>
    </div>
    <span class="form-hint">
        By ticking this box you are accepting that the project costs for your organisation are eligible as defined in the
        <a href="https://www.gov.uk/government/publications/innovate-uk-completing-your-application-project-costs-guidance">Project Costs guidance</a>
    </span>
</div>

<!-- =========================== Element: Competition status warning ================ -->
<div th:fragment="competition-status-message (app, competition)">
		<div class="warning-alert"  th:if="${(app.applicationStatusName == 'created' or app.applicationStatusName == 'open') and competition.competitionStatus.name() != 'OPEN'}">
        <h2 class="heading-small no-margin">Application not submitted</h2>
        <p>This application has not been entered into the competition <span th:text="${competition.name}" th:remove="tag"/> as it was not submitted before the competition deadline.</p>
    </div>
		<div class="success-alert" th:if="${(app.applicationStatusName == 'approved')}">
	        <h2 class="heading-small no-margin">Congratulations, your application has been successful</h2>
	        <p>
            You have been successful in this round of funding.
            <span th:if="${(competition.assessorFeedbackDate != null) and (competition.competitionStatus.name() == 'ASSESSOR_FEEDBACK')}" th:text="${'Assessor feedback on your application will be available here on '+ #temporals.format(competition.assessorFeedbackDate, 'd MMMM yyyy')+'.'}" th:remove="tag" />
          </p>
          <p th:if="${currentProject}">
            <a th:href="@{/project/{projectId}(projectId=${currentProject.id})}">Start to plan your project</a>
          </p>
    </div>
	  <div class="warning-alert" th:if="${(app.applicationStatusName == 'rejected')}">
        <h2 class="heading-small no-margin">Your application has not been successful in this competition.</h2>
        <p th:if="${(competition.assessorFeedbackDate != null) and (competition.competitionStatus.name() == 'ASSESSOR_FEEDBACK')}">
          <span th:text="${'Assessor feedback on your application will be available here on '+ #temporals.format(competition.assessorFeedbackDate, 'dd/MM/yyyy')}" th:remove="tag" />.
        </p>
    </div>
</div>
