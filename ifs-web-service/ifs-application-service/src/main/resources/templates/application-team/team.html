<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
        <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Application team'"/>
    </head>

    <body th:with="context='applicant'">
        <th:block th:insert="fragments/layout :: body-start"/>
        <th:block th:insert="fragments/layout :: global-header"/>

        <main id="content">
            <th:block th:insert="fragments/layout :: main-content-start"/>
            <th:block th:insert="fragments/layout :: header-sub"
                      th:with="linkTitle='Application overview',linkClass='link-back',linkUrl=@{/application/{applicationId}/(applicationId=${model.applicationId})}"/>

            <div class="page-title">
                <th:block
                    th:insert="fragments/elements :: application-title (applicationId=${model.applicationId},applicationName=${model.applicationName})"/>
                <h1 class="heading-xlarge">Application team</h1>
            </div>

            <p>View and manage your contributors and partners in the application. If an individual is ‘pending’ they have not yet confirmed their role within this project. Click on a name to send this person an email.</p>

            <p>To change the lead applicant for this application please email Innovate UK <a href="mailto:support@innovateuk.gov.uk">support@innovateuk.gov.uk</a>.</p>

            <th:block th:each="organisation : ${model.organisations}">
                <h2 class="heading-medium">
                    <th:block th:text="${organisation.lead} ? ${organisation.name} + ', Lead organisation' : ${organisation.name}"></th:block>
                </h2>

                <table class="table-overflow">
                    <thead>
                        <tr>
                            <th class="width-30-percent" scope="col">Applicant</th>
                            <th class="width-50-percent" scope="col">Email</th>
                            <th scope="col">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="applicant : ${organisation.applicants}">
                            <td th:text="${applicant.name}">Steve Smith</td>
                            <td th:text="${applicant.email}">steve.smith@empire.com</td>
                            <td th:text="${applicant.lead} ? 'Lead' : (${applicant.pending} ? 'Pending' : '')">Lead</td>
                        </tr>
                    </tbody>
                </table>

                <p th:if="${organisation.editable}">
                    <a th:href="@{/application/{applicationId}/team/update(applicationId=${model.applicationId},organisation=${organisation.id})}"
                    th:text="|Update ${organisation.name}|">Update Empire Ltd</a>
                </p>
            </th:block>

            <th:block th:if="${model.userLeadApplicant}">
                <p class="extra-margin">Add any organisations participating with you on this project. They are responsible for creating their own account and submitting their finances.</p>
                <p><a th:href="@{/application/{applicationId}/team/update(applicationId=${model.applicationId})}">Add partner organisation</a></p>
            </th:block>

            <p class="extra-margin">
                <a th:href="@{/application/{applicationId}(applicationId=${model.applicationId})}" class="button-secondary">Return to application overview</a>
            </p>

            <th:block th:insert="fragments/layout :: main-content-end"/>
        </main>

        <th:block th:insert="fragments/layout :: footer"/>
        <th:block th:insert="fragments/layout :: body-end"/>
    </body>
</html>
