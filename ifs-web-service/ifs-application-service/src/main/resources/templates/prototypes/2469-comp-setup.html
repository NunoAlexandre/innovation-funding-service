<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:include="fragments/layout :: head" th:with="pageTitle='Application Dashboard'" th:remove="tag" />
    <link href="/css/prototype.css" media="screen" rel="stylesheet" type="text/css" />
</head>

<body class="comp-setup">

<div th:include="prototypes/fragments/layout :: prototype-nav" th:remove="tag" />
<div th:include="fragments/layout :: body-start" th:remove="tag" />
<div th:include="fragments/layout :: global-header" th:remove="tag" />


<main id="content">
    <div th:include="fragments/layout :: main-content-start" th:remove="tag" />
    <div th:include="prototypes/fragments/applicant-view :: prototype-subheader(${'Competition dashboard'}, ${'/prototypes/1345-comp-dashboard-MVP'})" th:remove="tag" />

	<!-- HARDCODED PROTOTYPE HTML -->
	
	<div th:include="prototypes/fragments/comp-admin :: prototype-comp-admin-page-title-subheading(${'14060010:  A newly created competition'}, ${'Competition setup'}, ${'Create new competition'})" th:remove="tag" />

	<div th:include="prototypes/fragments/comp-setup :: prototype-comp-setup-navigation" th:remove="tag" />

	<!-- <div th:include="prototypes/fragments/comp-admin :: prototype-comp-navigation" th:with="page='project-setup', status='closed'" th:remove="tag" /> -->

	<div class="grid-row constrain-width">

		<div class="column-one">

			<div th:include="prototypes/fragments/comp-setup :: ${'prototype-section-'+ (param.section == null ? 'essential' : param.section[0])}" th:remove="tag"/>

		</div>


	</div>

	<!-- END OFHARDCODED PROTOTYPE HTML -->

    <div th:include="fragments/layout :: main-content-end" th:remove="tag" />
</main>

<div th:include="fragments/layout :: footer" th:remove="tag" />
<div th:include="fragments/layout :: body-end" th:remove="tag" />
<script src="/js/ifs_prototype/jquery.waypoints.min.js" type="text/javascript"></script>
<script src="/js/ifs_prototype/prototype.js" type="text/javascript"></script>
<script type="text/javascript">
	// <![CDATA[
	jQuery(document).ready(function(){

		function $_GET(param) {
	        var vars = {};
	        window.location.href.replace( location.hash, '' ).replace( 
	            /[?&]+([^=&]+)=?([^&]*)?/gi, // regexp
	            function( m, key, value ) { // callback
	                vars[key] = value !== undefined ? value : '';
	            }
	        );

	        if ( param ) {
	            return vars[param] ? vars[param] : null;    
	        }
	        return vars;
	    }


	    var sectionId = $_GET('sectionId'),
			status = $_GET('status'),
			compType = $_GET('compType');


		if(compType == 'Programme' || compType == 'Managed services'){
			jQuery('#stateAid').show();
			jQuery('#stateAid .yes').show();
			jQuery('#stateAid .no').hide();
		}else if(compType == 'SBRI' || compType == 'Special'){
			jQuery('#stateAid').show();
			jQuery('#stateAid .no').show();
			jQuery('#stateAid .yes').hide();
		}else{
			jQuery('#stateAid').hide();
		}


		//Of the available tabs check which section has been 'done'

		
		for(i = 1; i < jQuery(".inline-nav li").length+1; i++) {
			
			if(sectionId == i && status == 'done'){
				localStorage.setItem('section'+i, 'section-'+i+'-complete');		
			}else if (sectionId == i && status == 'edit'){
				localStorage.setItem('section'+i, 'section-'+i+'-not-complete');
			}

			if(localStorage.getItem('section'+i) == 'section-'+i+'-complete'){
				jQuery('#section-'+i).addClass('marked-as-complete');

				/*var querystring = "status=done";

				jQuery('#section-'+i+' a').each(function(){
					var href = jQuery(this).attr('href');
					alert(href);
					 href += (href.match(/\?/) ? '&' : '?') + querystring; // change last '?' to '#' if need
					 jQuery(this).attr('href', href);
				});*/

			}else{
				jQuery('#section-'+i).removeClass('marked-as-complete');
			}
		} 
			




		jQuery('#comp-stream-yes').on('click',function(e){ 

			if(jQuery(this).is(':checked')){
				jQuery('.comp-stream-group').show();
				jQuery('#add-stream').show();
			}

		});

		jQuery('#comp-stream-no').on('click',function(e){ 

			if(jQuery(this).is(':checked')){
				jQuery('.comp-stream-group').hide();
				jQuery('#add-stream').hide();
				jQuery('#show-stream-2').hide();
			}
		});

		jQuery('#compType').on('change',function(e){ 

			var compType = jQuery(this).val();

			if(compType == 'Programme' || compType == 'Managed services'){
				jQuery('#stateAid').show();
				jQuery('#stateAid .yes').show();
				jQuery('#stateAid .no').hide();
			}else if(compType == 'SBRI' || compType == 'Special'){
				jQuery('#stateAid').show();
				jQuery('#stateAid .no').show();
				jQuery('#stateAid .yes').hide();
			}else{
				jQuery('#stateAid').hide();
			}

		});

		jQuery('#compInnovationSector').on('change',function(e){ 

			jQuery('#compInnovationArea').val('');

			var compSector = jQuery(this).val();

			if(compSector == 'health'){
				jQuery('#compInnovationArea .health').show();
				jQuery('#compInnovationArea .materials').hide();
				jQuery('#compInnovationArea .emerging').hide();
				jQuery('#compInnovationArea .infrastructure').hide();
			}

			if(compSector == 'materials'){
				jQuery('#compInnovationArea .health').hide();
				jQuery('#compInnovationArea .materials').show();
				jQuery('#compInnovationArea .emerging').hide();
				jQuery('#compInnovationArea .infrastructure').hide();
			}

			if(compSector == 'emerging'){
				jQuery('#compInnovationArea .health').hide();
				jQuery('#compInnovationArea .materials').hide();
				jQuery('#compInnovationArea .emerging').show();
				jQuery('#compInnovationArea .infrastructure').hide();
			}

			if(compSector == 'emerging'){
				jQuery('#compInnovationArea .health').hide();
				jQuery('#compInnovationArea .materials').hide();
				jQuery('#compInnovationArea .emerging').hide();
				jQuery('#compInnovationArea .infrastructure').show();
			}

		});

		jQuery('#compInnovationArea').on('change',function(e){ 

			var compInnovationArea = jQuery(this).find('option:selected').attr('class');

			jQuery('#compInnovationSector').val(compInnovationArea);

		});

		jQuery('#add-stream').on('click',function(e){ 
			e.preventDefault();

			jQuery('#show-stream-2').show();

		});



	});
	// ]]>
</script>
</body>
</html>