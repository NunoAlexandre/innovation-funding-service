<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <th:block th:insert="fragments/layout :: head" th:with="pageTitle='Application Dashboard'" cache:name="Application-Dashboard" />
    <link href="/css/prototype.css" media="screen" rel="stylesheet" type="text/css" />



	<div th:if="${param.filterInnovationArea != null}" th:remove="tag">
		<style>
			#application-list tbody tr{
				display: none;
			}
			.pagination{
				display: none;
			}
			#application-list tbody tr.filtered-result{
				display: table-row;
			}
		</style>
	</div>

</head>

<body class="full-width show-full-table">

<th:block th:insert="prototypes/fragments/layout :: prototype-nav"  />
<th:block th:insert="fragments/layout :: body-start"   cache:name="body-start" />
<th:block th:insert="fragments/layout :: global-header"   cache:name="global-header" />


<main id="content">
    <th:block th:insert="fragments/layout :: main-content-start"   cache:name="main-content-start" />
    <th:block th:insert="prototypes/fragments/applicant-view :: prototype-subheader(${'Competitions dashboard'}, ${'#'})"  />

	<!-- HARDCODED PROTOTYPE HTML -->

	<th:block th:insert="prototypes/fragments/comp-admin :: prototype-comp-admin-page-title(${'Innovate UK, Technology inspired, (4891061)'}, ${'Funders panel'})"  />

	<div id="sticky-zone">

		<section class="info-area">

			<div class="boxed">

				<div class="grid-row">
					<div class="column-half">
						<p>Total funding available <br /><span class="heading-medium">£250000</span></p>
					</div>
					<div class="column-half">
						<p>Funding remaining <br /><span class="heading-medium">£<span id="funding-remaining">250000</span></span></p>
					</div>
				</div>
				<div class="grid-row">
					<div class="column-half">
						<p>Applications <br /><span class="heading-medium">45</span></p>
					</div>

					<div class="column-half">
						<p>Applications over 70% <br /><span class="heading-medium">6</span></p>
					</div>
				</div>

			</div>

			<div class="grid-row extra-margin">
				<div class="column-third">
					<p>Modal score <br /><span class="heading-medium">50%</span></p>
				</div>
				<div class="column-third">
					<p>Highest score <br /><span class="heading-medium">90%</span></p>
				</div>
				<div class="column-third">
					<p>Lowest score <br /><span class="heading-medium">34%</span></p>
				</div>
			</div>




		    <div th:if="${param.sendAssignments != null}" th:remove="tag">
		    	<div class="highlight-panel extra-margin">
			        <div class="alignright-button" id="added-assessors">
						<a href="/prototypes/1385-application-allocation-confirm" class="button large">Send updates to assessors</a>
					</div>
				</div>
			</div>

		</section>

		<!-- <p class="form-hint">Add assessors to the invite list by selecting '<strong>Add</strong>' from the list of <strong>current assessors</strong> in the section below</p> -->

		<section class="data-area">

			<h2 class="heading-large" id="current-assessors">Application list</h2>

			<div class="alignright-button highlight-panel">
				<a href="#" class="button button-secondary">Export assessors panel sheet</a>
				<a href="#" id="confirm-selections" class="button">Confirm selections</a>
			</div>

		    <div class="table-overflow extra-margin">
		        <table id="application-list">
		            <thead>
		                <tr>
		                    <th scope="col">Application number</th>
		                    <th scope="col">Project title</th>
		                    <th scope="col">Lead</th>
		                    <th scope="col">Assessment category (innovation area)</th>
		                    <th scope="col" class="alignright">Grant request (&#163;)</th>
		                    <th scope="col" class="alignright">Score as percentage</th>
		                    <th scope="col" class="alignright">Percentage spread</th>
		                    <th scope="col" class="alignright">Recommended</th>
		                    <th scope="col" class="alignright">Assessment panel score</th>
		                    <th scope="col" class="alignright">Panel recommended</th>
		                    <th scope="col" class="alignright" id="propose-funding">Propose funding</th>
		                    <th scope="col" class="alignright">Funding remaining</th>
		                </tr>
		            </thead>
		            <tbody>
		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5431</a></th>
		                    <td>Machine learning in robots</td>
		                    <td>PWC</td>
		                    <td>Digital services</td>
		                    <td class="alignright">50000</td>
		                    <td class="alignright">90</td>
		                    <td class="alignright">5</td>
		                    <td class="alignright">5</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" checked='checked' /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5432</a></th>
		                    <td>Robots that learn</td>
		                    <td>MaxDigital</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">88</td>
		                    <td class="alignright">2</td>
		                    <td class="alignright">5</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" checked='checked' /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5433</a></th>
		                    <td>AI in learning</td>
		                    <td>BBC</td>
		                    <td>Digital services</td>
		                    <td class="alignright">25000</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" checked='checked' /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5434</a></th>
		                    <td>Intelligent machine</td>
		                    <td>BBC</td>
		                    <td>Digital services</td>
		                    <td class="alignright">15000</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" checked='checked' /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5435</a></th>
		                    <td>Progressive machines</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">25000</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" checked='checked' /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr class="assessment-panel-start">
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5436</a></th>
		                    <td>Example application 6</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">90</td>
		                    <td class="alignright">Yes</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5437</a></th>
		                    <td>Example application 7</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">69</td>
		                    <td class="alignright">5</td>
		                    <td class="alignright">4</td>
		                    <td class="alignright">89</td>
		                    <td class="alignright">Yes</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5438</a></th>
		                    <td>Example application 8</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">66</td>
		                    <td class="alignright">9</td>
		                    <td class="alignright">2</td>
		                    <td class="alignright">79</td>
		                    <td class="alignright">Yes</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5439</a></th>
		                    <td>Example application 9</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">65</td>
		                    <td class="alignright">14</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">69</td>
		                    <td class="alignright">Yes</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr class="assessment-panel-end">
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5440</a></th>
		                    <td>Example application 10</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">44</td>
		                    <td class="alignright">No</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5441</a></th>
		                    <td>Example application 11</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5442</a></th>
		                    <td>Example application 12</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">69</td>
		                    <td class="alignright">5</td>
		                    <td class="alignright">4</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5443</a></th>
		                    <td>Example application 13</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">66</td>
		                    <td class="alignright">9</td>
		                    <td class="alignright">2</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5444</a></th>
		                    <td>Example application 14</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">65</td>
		                    <td class="alignright">14</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5445</a></th>
		                    <td>Example application 15</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>

		                <tr>
		                    <th scope="col"><a href="/prototypes/1196-readonly-application-view">1234-5446</a></th>
		                    <td>Example application 16</td>
		                    <td>Kingfisher</td>
		                    <td>Digital services</td>
		                    <td class="alignright">35000</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">-</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright">&nbsp;</td>
		                    <td class="alignright"><input type="checkbox" class="input-propose" aria-labelledby="propose-funding" /></td>
		                    <td class="alignright funding-remaining">&nbsp;</td>
		                </tr>
		            </tbody>
		        </table>
		    </div>

			<div th:if="${param.filterStatus == null}" th:remove="tag">

				<ul class="pagination">
				    <li class="next">
				        <a href="#" rel="next" title="Navigate to next part">
				            <span class="pagination-label">Next</span>
				            <span class="pagination-part-title">2 of 4</span>
				        </a>
				    </li>
				</ul>

			</div>

		</section>

	</div>


	<!-- END OFHARDCODED PROTOTYPE HTML -->

    <th:block th:insert="fragments/layout :: main-content-end"   cache:name="main-content-end" />
</main>

<th:block th:insert="fragments/layout :: footer"   cache:name="footer" />
<th:block th:insert="fragments/layout :: body-end"   cache:name="body-end" />
<script src="/js/ifs_prototype/jquery.waypoints.min.js" type="text/javascript"></script>
<script src="/js/ifs_prototype/prototype.js" type="text/javascript"></script>
<script type="text/javascript">
	// <![CDATA[

		var totalFunding = 250000;

		//First check the existing selected options and calculate remaining funding


		jQuery('.input-propose').each(function(){
			if (jQuery(this).prop('checked')){

				var grantRequest = jQuery(this).parent().parent().find('td:eq(3)').text();

				totalFunding = parseInt(totalFunding) - parseInt(grantRequest);

				jQuery(this).parent().parent().find('.funding-remaining').text(totalFunding);
				jQuery('#funding-remaining').text(totalFunding);

			}
		});


		jQuery('.input-propose').on('click',function(e){

			var grantRequest = jQuery(this).parent().parent().find('td:eq(3)').text();

			if (jQuery(this).prop('checked')){

				if (jQuery(this).parent().parent().find('.input-panel').prop('checked')){ // only allow one checkbox per row to be selected
					jQuery(this).parent().parent().find('.input-panel').prop('checked', false)

				}else{
					totalFunding = parseInt(totalFunding) - parseInt(grantRequest);
					jQuery(this).parent().parent().find('.funding-remaining').text(totalFunding);
					jQuery('#funding-remaining').text(totalFunding);
				}


			}else{
				totalFunding = parseInt(totalFunding) + parseInt(grantRequest);
				jQuery(this).parent().parent().find('.funding-remaining').text('');
				jQuery('#funding-remaining').text(totalFunding);
			}
		});

		jQuery('.input-panel').on('click',function(e){

			var grantRequest = jQuery(this).parent().parent().find('td:eq(3)').text();

			if (jQuery(this).prop('checked')){

				if (jQuery(this).parent().parent().find('.input-propose').prop('checked')){ // only allow one checkbox per row to be selected
					jQuery(this).parent().parent().find('.input-propose').prop('checked', false)

				}else{
					totalFunding = parseInt(totalFunding) - parseInt(grantRequest);
					jQuery(this).parent().parent().find('.funding-remaining').text(totalFunding);
					jQuery('#funding-remaining').text(totalFunding);
				}


			}else{
				totalFunding = parseInt(totalFunding) + parseInt(grantRequest);
				jQuery(this).parent().parent().find('.funding-remaining').text('');
				jQuery('#funding-remaining').text(totalFunding);
			}
		});


		jQuery('#confirm-selections').on('click',function(e){

			if (jQuery(this).text() != 'Edit'){
				jQuery('table input').prop('disabled', true);
				jQuery(this).text('Edit');
			}else{
				jQuery('table input').prop('disabled', false);
				jQuery(this).text('Confirm selections');
			}


		});




	// ]]>
</script>
</body>
</html>
