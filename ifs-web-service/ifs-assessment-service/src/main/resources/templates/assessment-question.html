<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
        <div th:include="fragments/layout :: head" th:with="pageTitle=${#strings.isEmpty(model.question.shortName) ? 'Assessment' : model.question.shortName}" th:remove="tag" />
    </head>

    <body class="assessment-details">
        <div th:include="fragments/layout :: prototype-nav" th:remove="tag" />
        <div th:include="fragments/layout :: body-start" th:remove="tag" />
        <div th:include="fragments/layout :: global-header" th:remove="tag" />

        <main id="content">
            <div th:include="fragments/layout :: main-content-start" th:remove="tag" />
            <div th:include="fragments/assessment :: assessment-header-sub" th:with="currentApplication=${model.application},linkTitle='Assessment Overview',linkClass='link-back',linkUrl=@{/{id}(id=${currentApplication.id})},daysPercentage=${model.daysLeftPercentage},daysLeft=${model.daysLeft}" th:remove="tag" />

            <div class="page-title">
                <div th:include="fragments/elements :: application-title (application=${model.application}, competition=${model.competition})" th:remove="tag" />
                <h1 class="heading-xlarge" th:text="${model.question.shortName}" />
            </div>

            <form action="#" enctype="multipart/form-data" th:action="@{${#ifsUtil.uriWithQueryString(#httpServletRequest)}}" method="post" th:object="${form}" novalidate="novalidate">
                <button class="hidden-save" type="submit" name="submit-section" tabindex="-1" aria-hidden="true">Save the form</button>
                <!--/div class="error-summary" th:if="${#fields.hasErrors('*')}">
                    <h1 class="heading-medium error-summary-heading">
                        Invalid input provided
                    </h1>
                    <ul class="error-summary-list">
                        <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
                    </ul>
                </div-->

                <p class="form-hint">Please review the answer provided and score the answer out of 10 points.</p>

                <div class="form-group">
                    <h2 class="heading-medium">
                        <span th:if="${model.question.questionNumber != null}" th:text="${model.question.questionNumber} + '. '" th:remove="tag" />
                        <span th:text="${model.question.name}" th:remove="tag" />
                    </h2>

                    <p th:text="${model.questionFormInputResponses.get(questionFormInput.id)}" th:with="questionFormInput=${model.questionFormInputs[0]}" />
                </div>

                <div th:if="${model.question.needingAssessorScore}" th:remove="tag">
                    <div th:include="fragments/assessment :: assessment-feedback-score (score=*{score})" th:remove="tag" />
                </div>

                <div th:if="${model.question.assessorConfirmationQuestion != null}" th:remove="tag">
                    <div th:include="fragments/assessment :: assessment-feedback-scope (confirmationQuestion=${model.question.assessorConfirmationQuestion})" th:remove="tag" />
                </div>

                <div th:if="${model.question.needingAssessorFeedback}" th:remove="tag">
                    <fieldset>
                        <legend class="visuallyhidden">Question feedback</legend>
                        <div class="form-group">
                            <div class="form-group">
                                <label class="form-label form-label-bold" for="assessor-question-feedback-text">Feedback
                                    <span class="form-hint">Please justify your score by writing two or three sentences which will be returned to the applicant as feedback</span>
                                </label>

                                <div th:include="question-type/form-elements :: form-guidance (guidable=${formInput})" th:remove="tag" />

                                <div class="textarea-wrapped word-count">
                                    <textarea rows="3" cols="60" data-max_words="350" id="assessor-question-feedback-text" name="assessor-question-feedback-text" th:text="*{value}" aria-hidden="true"></textarea>

                                    <div class="textarea-footer">
                                        <span class="count-label">
                                            <span class="count-message">Words remaining:</span>
                                            <span class="count-down positive" aria-live="polite">349</span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>

                <button type="submit" class="button-secondary app-submit-btn" name="submit-section">Save and return to assessment overview</button>
            </form>
            <input type="hidden" id="cacheTest" value="" />

            <ul class="pagination" th:unless="${#strings.isEmpty(navigation.previousUrl) and #strings.isEmpty(navigation.nextUrl)}">
                <li class="prev" th:unless="${#strings.isEmpty(navigation.previousUrl)}">
                    <a th:href="@{${navigation.previousUrl}}" rel="prev" title="Navigate to previous part">
                        <span class="pagination-label">Previous</span>
                        <span class="pagination-part-title" th:text="${navigation.previousText}" />
                    </a>
                </li>
                <li class="next" th:unless="${#strings.isEmpty(navigation.nextUrl)}">
                    <a th:href="@{${navigation.nextUrl}}" rel="next" title="Navigate to next part">
                        <span class="pagination-label">Next</span>
                        <span class="pagination-part-title" th:text="${navigation.nextText}" />
                    </a>
                </li>
            </ul>

            <div th:include="fragments/layout :: main-content-end" th:remove="tag" />
        </main>

        <div th:include="fragments/layout :: footer" th:remove="tag" />
        <div th:include="fragments/layout :: body-end" th:remove="tag" />
    </body>
</html>