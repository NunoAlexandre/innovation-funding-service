<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:ifs="http://www.w3.org/1999/xhtml">
    <head>
        <div th:include="fragments/layout :: head" th:with="pageTitle=${#strings.isEmpty(model.questionShortName) ? 'Assessment' : model.questionShortName}" th:remove="tag" />
    </head>

    <body class="assessment assessment-question">
        <div th:include="fragments/layout :: body-start" th:remove="tag" />
        <div th:include="fragments/layout :: global-header" th:remove="tag" />

        <main id="content">
            <div th:include="fragments/layout :: main-content-start" th:remove="tag" />
            <div th:include="fragments/assessment :: assessment-header-sub" th:with="linkTitle='Back to assessment overview',linkClass='link-back',linkUrl=@{${navigation.overviewUrl}},daysPercentage=${model.daysLeftPercentage},daysLeft=${model.daysLeft}" th:remove="tag" />

            <div class="page-title">
                <div th:include="fragments/elements :: application-title (application=${model.application}, competition=${model.competition})" th:remove="tag" />
                <h1 class="heading-xlarge" th:text="${model.questionShortName}" />
            </div>

            <form action="#" th:action="@{${#ifsUtil.uriWithQueryString(#httpServletRequest)}}" method="post" th:object="${form}" novalidate="novalidate">
                <button class="hidden-save" type="submit" name="submit-section" tabindex="-1" aria-hidden="true">Save the form</button>
                <!--/* /div class="error-summary" th:if="${#fields.hasErrors('*')}">
                    <h1 class="heading-medium error-summary-heading">
                        Invalid input provided
                    </h1>
                    <ul class="error-summary-list">
                        <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
                    </ul>
                </div */-->

                <p class="form-hint">Please review the answer provided and score the answer out of 10 points.</p>

                <div class="form-group">
                    <h2 class="heading-medium">
                        <span th:if="${model.questionNumber != null}" th:text="${model.questionNumber} + '. '" th:remove="tag" />
                        <span th:text="${model.questionName}" th:remove="tag" />
                    </h2>

                    <p th:text="${model.questionResponse}" />
                </div>

                <div th:if="${model.appendixExists}">
                    <div th:replace="question-type/form-elements :: readonly-file-download (filename=${model.appendixDetails.filename}, filesizeKbytes=${model.appendixDetails.filesizeKbytes}, fileDescription=${model.appendixFileDescription}, downloadURL=@{/})" />
                </div>

                <div th:if="${model.requireScore}" th:remove="tag">
                    <div th:include="fragments/assessment :: assessment-feedback-score (score=*{score})" th:remove="tag" />
                </div>

                <div th:if="${model.requireScopeConfirmation}" th:remove="tag">
                    <div th:include="fragments/assessment :: assessment-feedback-scope" th:remove="tag" />
                </div>

                <div th:if="${model.requireFeedback}" th:remove="tag">
                    <fieldset>
                        <legend class="visuallyhidden">Question feedback</legend>
                        <div class="form-group">
                            <div class="form-group">
                                <label class="form-label form-label-bold" for="assessor-question-feedback-text">Feedback
                                    <span class="form-hint">Please justify your score by writing two or three sentences which will be returned to the applicant as feedback</span>
                                </label>

                                <details th:unless="${#strings.isEmpty(model.assessorGuidanceQuestion)}">
                                    <summary>
                                        <span class="summary" th:text="${model.assessorGuidanceQuestion}" />
                                    </summary>
                                    <div class="panel-indent" ifs:utext="${model.assessorGuidanceAnswer}" />
                                </details>

                                <div th:include="fragments/assessment :: assessment-form-textarea-wordcount (id=${model.questionId}, name=${inputName}, value=*{value}, readonly=false, maxWords=${350})" th:remove="tag" />
                            </div>
                        </div>
                    </fieldset>
                </div>

                <button type="submit" class="button-secondary app-submit-btn" name="submit-section">Save and return to assessment overview</button>
            </form>
            <input type="hidden" id="cacheTest" value="" />

            <ul class="pagination" th:unless="${#strings.isEmpty(navigation.previousUrl) and #strings.isEmpty(navigation.nextUrl)}">
                <li class="prev" th:unless="${#strings.isEmpty(navigation.previousUrl)}">
                    <a th:href="@{${navigation.previousUrl}}" rel="prev" title="Navigate to previous part">
                        <span class="pagination-label">Previous</span>
                        <span class="pagination-part-title" th:text="${navigation.previousText}" />
                    </a>
                </li>
                <li class="next" th:unless="${#strings.isEmpty(navigation.nextUrl)}">
                    <a th:href="@{${navigation.nextUrl}}" rel="next" title="Navigate to next part">
                        <span class="pagination-label">Next</span>
                        <span class="pagination-part-title" th:text="${navigation.nextText}" />
                    </a>
                </li>
            </ul>

            <div th:include="fragments/layout :: main-content-end" th:remove="tag" />
        </main>

        <div th:include="fragments/layout :: footer" th:remove="tag" />
        <div th:include="fragments/layout :: body-end" th:remove="tag" />
    </body>
</html>
