<!-- ===========================Element: Skip-content=========================== -->

<div th:fragment="skiplink-container">
    <div id="skiplink-container">
      <div>
        <a href="#content" class="skiplink">Skip to main content</a>
      </div>
    </div>
</div>

<!-- ===========================Element: cookie message=========================== -->

<div th:fragment="global-cookie-message">
    <div id="global-cookie-message">
        <p>GOV.UK uses cookies to make the site simpler. <a href="https://www.gov.uk/help/cookies">Find out more about cookies</a></p>
    </div>
</div>

<!-- ===========================Element: alert message=========================== -->

<div th:fragment="global-alert-message">
    <div th:if="${alertMessages}" id="global-alert-message">
        <div th:remove="tag" th:each="alertMessage : ${alertMessages}">
            <div class="event-alert event-warning no-animation">
                <p><span ifs:utext="${alertMessage.message}"></span></p>
            </div>
        </div>
    </div>
</div>


<!-- ===========================Element: Header logo =========================== -->

<div th:fragment="header-logo">
    <div class="header-logo">
        <a href="https://www.gov.uk" title="Go to the GOV.UK homepage" id="logo" class="content">
          <img src="/images/gov.uk_logotype_crown.png" th:src="${@mvcResourceUrlProvider.getForLookupPath('/images/gov.uk_logotype_crown.png')}" width="35" height="31" alt="" />GOV.UK
        </a>
    </div>
    <p class="innovate-title">Innovation Funding Service</p>
</div>

<!-- ===========================Element: Header links =========================== -->
<div th:fragment="header-links">
    <div th:if="${#authentication} ? ${#authorization.expression('isAuthenticated()')} : ${false}" class="header-links">
        <ul class="navigation-list navigation-right">
            <li>
                <a th:href="${userDashboardLink}">My dashboard</a>
            </li>
            <li>
                <a th:href="${logoutUrl}">Logout</a>
            </li>
        </ul>
    </div>
</div>
<!-- =========================== Element: Competition Deadline =========================== -->
<div th:fragment="competition-deadline">
    <div class="competition-deadline">
        <div class="day">
            <div th:include="fragments/elements :: ordinal-day (date=${endDate})" th:remove="tag" />
        </div>
        <div class="month" th:text="${#temporals.monthName(endDate)}+' deadline'" />
    </div>
</div>

<!-- =========================== Element: simple ordinal day =========================== -->

<div th:fragment="ordinal-day (date)">
  <span th:switch="${#temporals.day(date)}" th:remove="tag">
      <span th:case="'1'" th:remove="tag"><span th:remove="tag" th:text="${#temporals.day(date)}" /><span>st</span></span>
      <span th:case="'21'" th:remove="tag"><span th:remove="tag" th:text="${#temporals.day(date)}" /><span>st</span></span>
      <span th:case="'31'" th:remove="tag"><span th:remove="tag" th:text="${#temporals.day(date)}" /><span>st</span></span>
      <span th:case="'2'" th:remove="tag"><span th:remove="tag" th:text="${#temporals.day(date)}" /><span>nd</span></span>
      <span th:case="'22'" th:remove="tag"><span th:remove="tag" th:text="${#temporals.day(date)}" /><span>nd</span></span>
      <span th:case="'3'" th:remove="tag"><span th:remove="tag" th:text="${#temporals.day(date)}" /><span>rd</span></span>
      <span th:case="'23'" th:remove="tag"><span th:remove="tag" th:text="${#temporals.day(date)}" /><span>rd</span></span>
      <span th:case="*" th:remove="tag"><span th:remove="tag" th:text="${#temporals.day(date)}" /><span>th</span></span>
  </span>
</div>

<!-- =========================== Element: Application Title =========================== -->
<div th:fragment="application-title (application, competition) ">
    <p class="subtitle" th:text="${#numbers.formatInteger(application.id,8)} + ': ' + ${application.getApplicationDisplayName()} "/>
</div>

<!-- =========================== Element: Competition Closing soon? =========================== -->
<div th:fragment="competition-closing-warning (competition) ">
    <div th:if="${competition.isClosingSoon()}" th:remove="tag">
        <div class="warning-alert">
            Please note that this competition will close shortly. You will not be able to submit after the competition closes and any edits you make will not be saved.
        </div>
    </div>
</div>
<!-- =========================== Element: Pie chart =========================== -->
<div th:fragment="pie-small">
    <div class="pie-container">
        <div class="pie small" th:text="${daysPercentage}+'%'"></div>
        <div class="pie-overlay">
            <div th:text=" (${daysLeft} &lt; 0 ? '0' : ${daysLeft}) ">18</div>
            <span class="visuallyhidden">Days left</span>
        </div>
    </div>
</div>
<div th:fragment="pie">
    <div class="pie-container">
        <div class="pie" th:text="${daysPercentage}+'%'">10%</div>
        <div class="pie-overlay">
            <div th:text=" (${daysLeft} &lt; 0 ? '0' : ${daysLeft}) ">18</div>
            <span>Days left</span>
        </div>
    </div>
</div>

<!-- =========================== Element: Progress indicator =========================== -->
<div th:fragment="progress-indicator">
    <div th:class="*{size != null} ? 'progress-container '+${size} : 'progress-container'">
        <div class="progress-indicator">
            <div class="progress" th:attr="aria-valuenow=${percentage}" aria-valuemin="0" aria-valuemax="100" role="progressbar" th:style="'width:'+${percentage}+'%'">
                <div>
                    <span th:text="${percentage}+'%'" th:remove="tag"/>
                    <span class="visuallyhidden"> Complete</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- =========================== Element: Notification / event =========================== -->
<div th:fragment="notification">
    <div class="event-alert" th:if="${notifications} and ${!notifications.isEmpty()}" th:with="notification=${notifications.get(0)}, questions=${notifications?.size()>1 ? 'questions' : 'a question'}">
        <p><span th:text="${notification?.assignedByName + ' has assigned ' + questions + ' to you'}"></span></p>
    </div>

    <div th:if="${applicationSaved}" th:unless="${assignedQuestion}" class="event-alert" >
        <p><span>You have saved your field successfully</span></p>
    </div>

    <div th:if="${assignedQuestion}" class="event-alert" >
        <p><span>Question assigned successfully</span></p>
    </div>

    <div th:if="${invitesSend}" class="event-alert">
        <p><span>Invites sent</span></p>
    </div>

    <div th:if="${inviteNotValid}" class="event-alert">
        <p><span>Invite not valid or expired</span></p>
    </div>

    <div th:if="${inviteAlreadyAccepted}" class="event-alert">
        <p><span>Invite already accepted</span></p>
    </div>

    <div th:if="${fileUploaded}" class="event-alert" >
        <p><span>You have uploaded file successfully</span></p>
    </div>

    <div th:if="${fileRemoved}" class="event-alert" >
        <p><span>File has been removed successfully</span></p>
    </div>

</div>

<!-- =========================== Element: Formatted Date =========================== -->
<div  th:fragment="pretty-date (date)" >
    <span th:remove="tag" th:with="today=(${#temporals.createToday()})">
        <span th:remove="tag" th:if="${date.toLocalDate().equals(today)}" th:text="Today"/>
        <span th:remove="tag" th:if="${date.toLocalDate().equals(today.minusDays(1))}" th:text="Yesterday"/>
        <span th:remove="tag" th:unless="${date.toLocalDate().equals(today)} or ${date.toLocalDate().equals(today.minusDays(1))}"
                  th:text="${#temporals.format(date, 'dd MMMM hh:mma')}"/>
    </span>
</div>

<!--  ========================== Element: Agree to application terms =============== -->
<div th:fragment="application-agree-to-terms">
	<div class="form-block">
		<label class="block-label" for="agree-terms-page">
			<input id="agree-terms-page" name="agreeTerms" type="checkbox" value="yes"/>
			The members of this consortium agree to the <a target="_blank" th:href="@{/application/terms-and-conditions}">terms and conditions</a> of applying for funding through Innovate UK.
		</label>
	</div>
</div>

<!-- =========================== Element: Competition status warning ================ -->
<div th:fragment="competition-status-message (application, competition)">
	<div th:if="${(application.applicationStatusName == 'created' or application.applicationStatusName == 'open') and competition.competitionStatus.name() != 'OPEN'}" th:remove="tag">
		<div class="warning-alert">
	        <h2 class="heading-small no-margin">Application not submitted</h2>
	        <p>This application has not been entered into the competition <span th:text="${competition.name}" th:remove="tag"/> as it was not submitted before the competition deadline.</p>
	    </div>
    </div>
    <div th:if="${(application.applicationStatusName == 'approved')}" th:remove="tag">
		<div class="success-alert">
	        <h2 class="heading-small no-margin">Congratulations, your application has been successful</h2>
	        <p>You have been successful in this round of funding. All partners and collaborators in the project have been informed. <span th:if="${competition.assessorFeedbackDate != null}" th:text="${'Assessor feedback on your application will be available here by 5:30pm on ' + #temporals.format(competition.assessorFeedbackDate, 'dd/MM/yyyy')}" th:remove="tag" /></p>
			<p th:if="${currentProject}"><a th:href="@{/project/{projectId}(projectId=${currentProject.id})}">Start to plan your project</a></p>
	    </div>
    </div>
    <div th:if="${(application.applicationStatusName == 'rejected')}" th:remove="tag">
		<div class="warning-alert">
	        <h2 class="heading-small no-margin">Your application has not been successful in this competition.</h2>
	        <p>All partners and collaborators in the project have been informed. <span th:if="${competition.assessorFeedbackDate != null}" th:text="${'Assessor feedback on your application will be available here by 5:30pm on ' + #temporals.format(competition.assessorFeedbackDate, 'dd/MM/yyyy')}" th:remove="tag" /></p>
	    </div>
    </div>
</div>
