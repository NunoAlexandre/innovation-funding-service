<!-- ===========================Element: Skip-content=========================== -->

<div th:fragment="skiplink-container">
    <div id="skiplink-container">
      <div>
        <a href="#content" class="skiplink">Skip to main content</a>
      </div>
    </div>
</div>

<!-- ===========================Element: cookie message=========================== -->

<div th:fragment="global-cookie-message">
    <div id="global-cookie-message">
        <p>GOV.UK uses cookies to make the site simpler. <a href="https://www.gov.uk/help/cookies">Find out more about cookies</a></p>
    </div>
</div>

<!-- ===========================Element: Header logo =========================== -->

<div th:fragment="header-logo">
    <div class="header-logo">
        <a href="https://www.gov.uk" title="Go to the GOV.UK homepage" id="logo" class="content">
          <img src="/images/gov.uk_logotype_crown.png" width="35" height="31" alt="GOV.UK" />GOV.UK
        </a>
    </div>
    <p class="innovate-title">Innovation Funding Service</p>
</div>

<!-- ===========================Element: Header links =========================== -->
<div th:fragment="header-links">
    <div th:if="${#authentication} ? ${#authorization.expression('isAuthenticated()')} : ${false}" class="header-links">
        <ul class="navigation-list navigation-right">
            <li>
                <a th:href="${userDashboardLink}">My dashboard</a>
            </li>
            <li>
                <a href="/logout">Logout</a>
            </li>
        </ul>
    </div>
</div>
<!-- =========================== Element: Competition Deadline =========================== -->
<div th:fragment="competition-deadline">
    <div class="competition-deadline">
        <div class="day">
            <div th:text="${#temporals.day(endDate)}" th:remove="tag" /><span th:switch="${#temporals.day(endDate)}">
                <span th:case="'1'" th:remove="tag">st</span>
                <span th:case="'21'" th:remove="tag">st</span>
                <span th:case="'31'" th:remove="tag">st</span>
                <span th:case="'2'" th:remove="tag">nd</span>
                <span th:case="'22'" th:remove="tag">nd</span>
                <span th:case="'3'" th:remove="tag">rd</span>
                <span th:case="'23'" th:remove="tag">rd</span>
                <span th:case="*" th:remove="tag">th</span>
            </span>
        </div>
        <div class="month" th:text="${#temporals.monthName(endDate)}+' deadline'" />
        <div class="time">
            <!--<span th:text="${#temporals.format(endDate, 'HH:mm')}" />-->
        </div>
    </div>
</div>

<!-- =========================== Element: Application Title =========================== -->
<div th:fragment="application-title (application, competition) ">
    <h2 class="subtitle" th:if="${application.getName() != ''}" th:text="${application.getName()} +' - Application number ' + ${application.getId()} "/>
    <h2 class="subtitle" th:unless="${application.getName() != ''}" th:text="${competition.getName()} +' - Application number ' + ${application.getId()} "/>
</div>
<!-- =========================== Element: Pie chart =========================== -->
<div th:fragment="pie-small">
    <div class="pie-container">
        <div class="pie small" th:text="${daysPercentage}+'%'"></div>
        <div class="pie-overlay">
            <div th:text=" (${daysLeft} &lt; 0 ? '0' : ${daysLeft}) ">18</div>
            <span>Days left</span>
        </div>
    </div>
</div>
<div th:fragment="pie">
    <div class="pie-container">
        <div class="pie" th:text="${daysPercentage}+'%'">10%</div>
        <div class="pie-overlay">
            <div th:text=" (${daysLeft} &lt; 0 ? '0' : ${daysLeft}) ">18</div>
            <span>Days left</span>
        </div>
    </div>
</div>

<!-- =========================== Element: Progress indicator =========================== -->
<div th:fragment="progress-indicator">
    <div  th:class="*{size != null} ? 'progress-container '+${size} : 'progress-container'">
        <div class="progress-indicator">
            <div class="start">0%</div>
            <div class="progress" th:style="'width:'+${percentage}+'%'">
                <div th:text="${percentage}+'%'">
                    0%
                </div>
            </div>
            <div class="end">100%</div>
        </div>
    </div>
</div>

<!-- =========================== Element: Notification / event =========================== -->
<div th:fragment="notification">
    <div class="event-alert is-open" th:if="${!notifications.isEmpty()}" th:with="notification=${notifications.get(0)}, questions=${notifications?.size()>1 ? 'questions' : 'a question'}">
        <p>
            <span th:text="${notification?.assignedBy?.user?.name + ' has assigned ' + questions + ' to you'}"></span>
        </p>
    </div>

    <div th:if="${applicationSaved}" th:unless="${assignedQuestion}" class="event-alert" th:classappend="is-open">
        <p>
            <span>You have saved your field successfully</span>
        </p>
    </div>

    <div th:if="${assignedQuestion}" class="event-alert" th:classappend="is-open">
        <p>
            <span>Question assigned successfully</span>
        </p>
    </div>
</div>

<!-- =========================== Element: Formatted Date =========================== -->
<div  th:fragment="pretty-date (date)" >
    <span th:with="today=(${#temporals.createToday()})">
        <span th:if="${date.toLocalDate().equals(today)}" th:text="Today"/>
        <span th:if="${date.toLocalDate().equals(today.minusDays(1))}" th:text="Yesterday"/>

        <span th:unless="${date.toLocalDate().equals(today)} or ${date.toLocalDate().equals(today.minusDays(1))}"
                  th:text="${#temporals.format(date, 'dd MMMM hh:mma')}"/>
    </span>
</div>
