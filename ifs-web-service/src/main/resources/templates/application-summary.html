<!DOCTYPE html>
<html  class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:include="fragments/layout :: head" th:with="pageTitle='Application Summary'"  th:remove="tag" />
</head>
<body class="app-summary">
<div th:include="fragments/modals :: modal-overlay" th:remove="tag" />
<div th:include="fragments/modals :: modal-confirm-submit" th:remove="tag" />


<div th:include="fragments/layout :: body-start" th:remove="tag" />
<div th:include="fragments/layout :: global-header" th:remove="tag" />

<main id="content">
    <div th:include="fragments/layout :: main-content-start" th:remove="tag" />
    <div th:include="fragments/layout :: header-sub" th:with="currentApplication=${currentApplication}" th:remove="tag" />

    <a class="back" th:href="@{/application-form/{id}/section/1(id=${currentApplication.getId()})}">&lt; Back to application</a>
    
    <h1 class="heading-xlarge">Application Summary</h1>
    <p class="subtitle">
        Please review your application before final submission. Any section where there are errors or problems with the content have been highlighted in red.
    </p>

    <div class="collapsible section-overview">
        <div th:remove="tag" th:each="section : ${sections.values()}" th:unless='${section.name.equals("Finances")}'>
            <h2 th:text="${section.getName()}" th:class="((${section.getId()} == ${currentSectionId}) ? 'open':'') +' '+ ((${completedSections.contains(section.getId())}) ? 'section-completed':'')+' '+ ((${incompletedSections.contains(section.getId())}) ? 'section-incomplete':'')" />
                <div class="question" th:each="question : ${section.getQuestions()}" th:if='${question.getName() != ""}' th:with="readonly=true, readonlyButEditable=true, response=(${responses.get(question.getId())})" th:id="'question-'+${question.getId()}" >
                    <div th:replace="question-type/types :: ${question.getQuestionType().getTitle()}" th:unless='${question.getQuestionType().getTitle().equals("finance"}' th:with="$question=(${question}), $currentApplication=(${currentApplication}), $response=(${response}), $section=(${section}), $readonly=${readonly}" />
                </div>
        </div>
        <h2>Finances Summary</h2>
        <div class="question">
            <div th:replace="question-type/types :: application_finances_summary"></div>
        </div>
    </div>
    <hr/>
    <div>
        <span class="icon icon-information"></span>
        <span> You will not be able to make changes to your application or resubmit after this point. By submitting this application you are agreeing to Innovate UK's <a href="">terms and conditions</a>.</span>
    </div>

    <div class="alignright-button">
        <a role="button" tabindex="0" class="button large" data-js-modal="modal-confirm-submit" th:href="@{/application/{id}/confirm-submit(id=${currentApplication.getId()})}" th:if="${incompletedSections.size() == 0}">Submit application</a>
        <button disabled="disabled" class="button" th:unless="${incompletedSections.size() == 0}">Submit application</button>
    </div>

    <div th:include="fragments/layout :: main-content-end" th:remove="tag" />
</main>

<div th:include="fragments/layout :: footer" th:remove="tag" />
<div th:include="fragments/layout :: body-end" th:remove="tag" />
</body>
</html>
