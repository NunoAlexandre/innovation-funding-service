<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:include="fragments/layout :: head" th:with="pageTitle='Application Details'"  th:remove="tag"></div>
</head>
<body class="app-details">

<div th:include="fragments/layout :: body-start" th:remove="tag"></div>
<div th:include="fragments/layout :: global-header" th:remove="tag"></div>


<main id="content">
    <div th:include="fragments/layout :: main-content-start" th:remove="tag"></div>
    <div th:include="fragments/layout :: header-sub" th:remove="tag"></div>
    <div th:include="fragments/elements :: notification" th:remove="tag"></div>

    <div class="page-title">
        <h2 class="subtitle" th:text="${currentApplication.getName()}"/>
        <h1 class="heading-xlarge">Application overview</h1>
    </div>


    <div class="grid-row">
         <div class="column-half">
            <div th:include="fragments/elements :: progress-indicator" th:with="percentage=${completedQuestionsPercentage},size='medium'" th:remove="tag"></div>
        </div>
        <div class="column-half">
            <ul class="list-bullet">
                <li><a href="#">View team members and add collaborators</a></li>
            </ul>
        </div>
    </div>

    <h2 class="bold-medium">Competition details</h2>
    <p th:text="${currentCompetition.getDescription()}" />

   
    <form action="#" method="post" >
        <div class="application-overview">
            <div th:remove="tag" th:each="section : ${sections.values()}">
                <section th:id="'section-'+${section.getId()}">
                <h2 th:text="${section.getName()}" class="heading-medium"/>
                <ul th:switch="${section.getChildSections().size()}" th:with="currentUser=${#authentication.getDetails()}" class="list-overview">
                    <div th:case="${0}" th:remove="tag">
                        <div th:replace="application/single-section-details :: sectionDetails (question=${question}, questionAssignee=${questionAssignee}, questionAssignees=${questionAssignees}, responses=${responses}, currentUser=${currentUser}, userIsLeadApplicant=${userIsLeadApplicant}, section=${section}, currentApplication=${currentApplication})"></div>
                    </div>
                    <!--/* sections with children like the finance */--> 
                    <div th:case="*" th:remove="tag">
                        <li class="grid-row" th:classappend="section">
                            <div class="column-two-thirds">
                                <h3 class="heading-small">
                                    <a th:href="'/application-form/'+${currentApplication.getId()}+'/section/'+${section.getId()}"
                                       th:text="${section.getName()}" />
                                </h3>
                            </div>
                        </li>
                        <li class="grid-row" th:classappend="section" th:each="childSection : ${section.getChildSections()}">
                            <div class="column-two-thirds">
                                <h3 class="heading-small">
                                    <a th:href="'/application-form/'+${currentApplication.getId()}+'/section/'+${childSection.getId()}"
                                       th:text="${childSection.getName()}" />
                                </h3>
                            </div>
                        </li>
                    </div>
                </ul>
                </section>
            </div>
        </div>
    </form>
    <div class="alignright-button">
        <a role="button" tabindex="0" class="button" th:href="@{/application/{id}/summary(id=${currentApplication.getId()})}">Review &amp; submit</a>
    </div>


    <div th:include="fragments/layout :: main-content-end" th:remove="tag"></div>
</main>

<div th:include="fragments/layout :: footer" th:remove="tag"></div>
<div th:include="fragments/layout :: body-end" th:remove="tag"></div>
</body>
</html>
