<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">


<!-- ===========================Form: Add row button =========================== -->
<div th:fragment="add_row(text, question, rowcontainer)">
    <button type="submit"
            name="add_cost"
            th:value="${question.id}"
            th:class="'buttonlink'"
            class="add-another-row buttonlink"
            th:attrappend="data-repeatable-rowcontainer=${rowcontainer}"
            th:text="${text}"
            >
    </button>
</div>


    <!-- ===========================Form: Textinput =========================== -->

    <div th:fragment="textinput" class="form-group " th:classappend="${#fields.hasErrors(validationId)} ? adminclass : userclass">

        <label class="form-label form-label-bold" th:for="${formInput.getId()}">
          <span th:if="${question.getName()}" th:text="question.getName()" />
          <div th:include="question-type/form-elements :: form-hint (hint=${question.getDescription()})" th:remove="tag" />
          <div th:include="question-type/form-elements :: form-validation-messages (id=${formInput.getId()})" th:remove="tag" />
        </label>

        <div th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
        <div th:include="question-type/form-elements :: form-textinput (id=${formInput.getId()}, response=${responses?.get(formInput.getId())?.getValue()})" th:remove="tag" />
    </div>

    <!-- =========================== Form: Textarea =========================== -->
    <!-- === (defaults to the wrapped textarea with wordcount and statusses)=== -->

    <div th:fragment="textarea"  class="form-group" th:id="${formInputIndex}"  th:classappend="${#fields.hasErrors('formInput[__${formInput.getId()}__]')} ? error : ''">

      <label class="form-label form-label-bold" th:for="${formInput.getId()}">
        <span th:if="${readonly} and ${question.getName()}" th:text="${question.name}" />
        <span th:unless="${readonly}" th:if="${question.getName()}" th:text="${question.questionNumber!=null ? question.questionNumber + '. ' : '' } + ${question.name}" />
        <div th:unless="${readonly}" th:include="question-type/form-elements :: form-hint (hint=${question.getDescription()})" th:remove="tag"  />
        <div th:include="question-type/form-elements :: form-validation-messages (id=${formInput.getId()})" th:remove="tag" />
      </label>
      <div th:unless="${readonly}" th:include="question-type/form-elements :: form-guidance" th:remove="tag"  />
      <div th:include="question-type/form-elements :: form-textarea-wrapped" th:remove="tag" />
    </div>

    <!-- Brent : textarea wordcount only gets used in assesment as far as I could find -->

    <div th:fragment="textarea-wordcount (name, id, inputName, hint, maxWords, value)"  class="form-group">
        <label class="form-label form-label-bold" th:for="${id}">
            <span th:if="${name}" th:text="${name}" />
            <div th:include="question-type/form-elements :: form-hint (hint=${hint})" th:remove="tag"  />
            <div th:include="question-type/form-elements :: form-validation-messages (id=${id})" th:remove="tag"  />
        </label>
        <div th:include="question-type/form-elements :: form-textarea-wordcount (id=${id}, name=${inputName}, value=${value},readonly=false, maxWords=${maxWords})" th:remove="tag" />
    </div>

    <!-- ===========================Form: Date input =========================== -->

    <div th:fragment="date" class="form-group">
        <label class="form-label form-label-bold" th:for="${formInput.getId()}">
          <span th:if="${question.getName()}" th:text="${question.name}" />
          <div th:include="question-type/form-elements :: form-hint (hint=${question.getDescription()})" th:remove="tag" />
          <div th:include="question-type/form-elements :: form-validation-messages (id=${formInput.getId()})" th:remove="tag" />
        </label>
        <div th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
        <div th:include="question-type/form-elements :: form-dateinput (id=${formInput.getId()}, day='', month='', year='')" th:remove="tag" />
    </div>

    <!-- ===========================Form: Fileupload =========================== -->
    <div th:fragment="fileupload" class="form-group">
        <label th:if="${formInputIndex == 0}" class="form-label form-label-bold" th:for="${formInput.getId()}">
            <span th:if="${question.getName() != null}" th:text="${question.name}" />
            <div th:include="question-type/form-elements :: form-hint (hint=${question.getDescription()})" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-validation-messages (id=${formInput.getId()})" th:remove="tag" />
        </label>
        <div th:if="${formInputIndex == 0}" th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
        <input type="file" th:id="${formInput.getId()}" />
    </div>

    <!-- ===========================Form: Percentage =========================== -->

    <div th:fragment="percentage" class="form-group">
        <label class="form-label" th:for="${formInput.getId()}">
          <span th:if="${question.getName()}" th:text="${question.name}" />
          <div th:include="question-type/form-elements :: form-hint (hint=${question.getDescription()})" th:remove="tag" />
          <div th:include="question-type/form-elements :: form-validation-messages (id=${formInput.getId()})" th:remove="tag" />
        </label>
        <div th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
        <div th:include="question-type/form-elements :: form-number-extra-small (id=${formInput.getId()}, field=${field})" th:remove="tag" />
        <span>%</span>
    </div>

    <!-- ===========================Form: application_details =========================== -->

    <div th:fragment="application_details" th:remove="tag">
        <div class="form-group">
            <label class="form-label form-label-bold" th:for="application_details-title">
                  <span>Project title</span>
                  <div th:unless="${readonly}" th:include="question-type/form-elements :: form-hint (hint='Enter the full title of your project')" th:remove="tag" />
                  <div th:include="question-type/form-elements :: form-validation-messages (id='application_details-title')" th:remove="tag" />
            </label>
            <div th:unless="${readonly}" th:include="question-type/form-elements :: form-guidance" th:remove="tag" />
            <div th:include="question-type/form-elements :: form-textinput-full-width (id='application_details-title', field='application.name' ,readonly=${readonly != null ? readonly : question.isMarkAsCompletedEnabled() and markedAsComplete?.contains(question.id)})" th:remove="tag" />
        </div>

        <fieldset>
          <div class="form-group">
               <legend>
                   <span class="form-label form-label-bold">Estimated timescales</span>
                   <span>Project start date</span>
                   <div th:include="question-type/form-elements :: form-validation-messages (id='details-application-timescale')" th:remove="tag" />
                   <div th:unless="${readonly}" th:include="question-type/form-elements :: form-hint (hint='For example: 31 12 2015')" th:remove="tag" />
               </legend>

            <div th:include="question-type/form-elements :: form-dateinput (id='application_details-startdate', field='application.startDate',readonly=${readonly != null ? readonly : question.isMarkAsCompletedEnabled() and markedAsComplete?.contains(question.id)})" th:remove="tag" /><br/>
            <div th:include="question-type/form-elements :: form-duration (id='application_details-duration', field='application.durationInMonths',readonly=${readonly != null ? readonly : question.isMarkAsCompletedEnabled() and markedAsComplete?.contains(question.id)})" th:remove="tag" />
        </div>
      </fieldset>

        <div class="form-group">
            <h2 class="heading-medium">Lead organisation</h2>
            <div th:text="${leadOrganisation.getName()}"></div>
        </div>

        <div class="form-group">
            <h2 class="heading-medium">Partners</h2>
            <ul class="list-bullet">
                <li th:each="organisation : ${applicationOrganisations}" th:unless="${organisation.equals(leadOrganisation)}">
                    <span th:text="${organisation.getName()}"></span>
                </li>
            </ul>
        </div>

        <p>
            <div th:if="${readonly}" th:include="question-type/form-elements :: form-edit-question-button" th:remove="tag"/>
            <div th:include="question-type/form-elements :: form-mark-as-complete-buttons" th:remove="tag"/>
        </p>
    </div>


</html>
