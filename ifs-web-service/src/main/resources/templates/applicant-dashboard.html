<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:include="fragments/layout :: head" th:with="pageTitle='Application Dashboard'" th:remove="tag" />
</head>
<body class="app-dashboard">

<div th:include="fragments/layout :: body-start" th:remove="tag" />
<div th:include="fragments/layout :: global-header" th:remove="tag" />

<main id="content">
    <div th:include="fragments/layout :: main-content-start" th:remove="tag" />

    <div class="event-alert is-open" th:each="notification:${notifications}">
        <p>
            <span th:text="${notification?.assignedBy?.user?.name + ' has assigned a question to you'}"></span>
        </p>
    </div>

    <div class="my-applications">

        <div class="in-progress">
            <h3 class="heading-large">In Progress</h3>
            <ul class="boxed-list">
                <li th:each="application : ${applicationsInProcess}">
                    <div class="grid-row" th:unless="${application.getApplicationStatus().getName() == 'submitted'}" >
                        <div class="column-half">
                            <h4 class="heading-medium">
                                <a th:href="@{/application/{id}/section/1(id=${application.getId()})}" th:text="${application.name}">placeholder</a>
                            </h4>
                            <p class="form-hint">Application number: <span th:text="${application.id}"></span></p>
                            <p class="form-hint">Current progress: </p>

                            <div th:include="fragments/elements :: progress-indicator" th:with="percentage=${applicationProgress.get(application.getId())}" th:remove="tag" />
                        </div>
                        <div class="column-half">
                            <div th:include="fragments/elements :: competition-deadline" th:with="endDate=${application.competition.endDate}" th:remove="tag" />
                            <div th:include="fragments/elements :: pie" th:with="daysPercentage=${application.getCompetition().getStartDateToEndDatePercentage()},daysLeft=${application.getCompetition().getDaysLeft()}" th:remove="tag" />
                        </div>
                    </div>
                    <div class="grid-row" th:if="${application.getApplicationStatus().getName() == 'submitted'}" >
                        <div class="column-two-thirds">
                            <h4 class="heading-medium">
                                <a th:href="@{/application/{id}/track(id=${application.getId()})}" th:text="${application.name}">placeholder</a>
                            </h4>
                            <p class="form-hint">Application number: <span th:text="${application.id}"></span></p>
                            <strong class="greentext">Application submitted</strong>
                        </div>
                        <div class="column-one-third">
                            Awaiting assessment
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <div class="previous-applications">
            <h3 class="heading-large">Previous Applications</h3>
            <ul class="boxed-list">
                <li th:each="application : ${applicationsFinished}">
                    <div class="grid-row">
                        <div class="column-two-thirds">
                            <h4 class="heading-medium" th:text="${application.name}"></h4>
                            <p class="form-hint">Application number: <span th:text="${application.id}"></span></p>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

    </div>


    <div th:include="fragments/layout :: main-content-end" th:remove="tag" />
</main>

<div th:include="fragments/layout :: footer" th:remove="tag" />
<div th:include="fragments/layout :: body-end" th:remove="tag" />
</body>
</html>