<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:include="fragments/layout :: head" th:with="pageTitle='Application Dashboard'" th:remove="tag" />
</head>
<body class="app-dashboard">

<div th:include="fragments/layout :: body-start" th:remove="tag" />
<div th:include="fragments/layout :: global-header" th:remove="tag" />

<main id="content">
    <div th:include="fragments/layout :: main-content-start" th:remove="tag" />

    <div class="event-alert is-open" th:each="notification:${notifications}">
        <p>
            <span th:text="${notification?.assignedBy?.user?.name + ' has assigned a question to you'}"></span>
        </p>
    </div>

    <div class="my-applications">

        <section class="in-progress">
            <h1 class="heading-large">In Progress</h1>
            <ul class="boxed-list">
                <li th:each="application : ${applicationsInProcess}">
                    <div class="grid-row" th:unless="${application.getApplicationStatus().getName() == 'submitted'}" >
                        <div class="column-half">
                            <h2 class="heading-medium">
                                <a th:href="@{/application/{id}(id=${application.getId()})}" th:text="${application.name}">placeholder</a>
                            </h2>
                            <p class="form-hint">Application number: <span th:text="${application.id}"></span></p>
                            <p class="form-hint">Current progress: </p>

                            <div th:include="fragments/elements :: progress-indicator" th:with="percentage=${applicationProgress.get(application.getId())}" th:remove="tag" />
                        </div>
                        <div class="column-half">
                            <div th:include="fragments/elements :: competition-deadline" th:with="endDate=${application.competition.endDate}" th:remove="tag" />
                            <div th:include="fragments/elements :: pie" th:with="daysPercentage=${application.getCompetition().getStartDateToEndDatePercentage()},daysLeft=${application.getCompetition().getDaysLeft()}" th:remove="tag" />
                        </div>
                    </div>
                    <div class="grid-row" th:if="${application.getApplicationStatus().getName() == 'submitted'}" >
                        <div class="column-two-thirds">
                            <h2 class="heading-medium">
                                <a th:href="@{/application/{id}/track(id=${application.getId()})}" th:text="${application.name}">placeholder</a>
                            </h2>
                            <p class="form-hint">Application number: <span th:text="${application.id}"></span></p>
                            <strong class="greentext">Application submitted</strong>
                        </div>
                        <div class="column-third">
                            <div class="awaiting-assessment">
                                Awaiting <br/> assessment
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </section>

        <section class="previous-applications">
            <h1 class="heading-large">Previous Applications</h1>
            <ul class="boxed-list">
                <li th:each="application : ${applicationsFinished}">
                    <div class="grid-row">
                        <div class="column-assessment-details">
                            <h2 class="heading-medium" th:text="${application.name}"></h2>
                            <p class="form-hint">Application number: <span th:text="${application.id}"></span></p>
                        </div>
                        <div class="column-assessment-status navigation-right">
                            <div th:class="((${application.applicationStatus.name} == 'approved') ? 'yes' : 'no') + ' application-status assessed'">
                                <h3 th:if="${application.applicationStatus.name == 'rejected'}" th:text="Unsuccessful" th:class="results-status"></h3>
                                <h3 th:if="${application.applicationStatus.name == 'approved'}" th:text="Successful" th:class="results-status"></h3>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </section>

    </div>

    <div th:include="fragments/layout :: main-content-end" th:remove="tag" />
</main>

<div th:include="fragments/layout :: footer" th:remove="tag" />
<div th:include="fragments/layout :: body-end" th:remove="tag" />
</body>
</html>