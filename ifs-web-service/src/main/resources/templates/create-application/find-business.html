<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <div th:include="fragments/layout :: head" th:with="pageTitle='Create an application'" th:remove="tag"/>
</head>
<body class="create-application-find-business">

<div th:include="fragments/layout :: body-start" th:remove="tag"/>
<div th:include="fragments/layout :: global-header" th:remove="tag"/>

<main id="content">
    <div th:include="fragments/layout :: main-content-start" th:remove="tag"/>


        <h1 class="heading-large">Create your account</h1>
        <p class="form-hint icon-info-small-blue">Organisation must be UK based to receive funding from innovate UK</p>

        <h2 class="heading-medium">Business organisation</h2>

        <form th:action="@{/organisation/create/find-business}" th:object="${companyHouseForm}" method="POST">
            <fieldset>
                <legend class="visuallyhidden">Business organisation</legend>

                <div th:class="${#fields.hasErrors('*{companyHouseName}') and companyHouseForm.companyHouseSearching} ? 'form-group error' : 'form-group'">
                    <label class="form-label" for="org-name">
                       <span class="form-label-bold">Find your organisation on Companies House</span>
                       <span class="form-hint">Enter your company name or registration number</span>
                        <span class="error-message" th:if="${#fields.hasErrors('*{companyHouseName}') and companyHouseForm.companyHouseSearching}" th:errors="*{companyHouseName}" />
                    </label>
                    <input class="form-control" id="org-name" th:field="*{companyHouseName}" type="text" value="" />
                    <button type="submit" id="org-search" name="search-company-house" class="button">Search</button>
                </div>

                <ul id="org-results" class="results-list panel-indent" th:if="${companyHouseForm.companyHouseSearching}" th:unless="${#fields.hasErrors('*{companyHouseName}')}">
                    <li class="type-company" th:each="company : ${companyHouseForm.companyHouseList}">
                        <h3>
                            <a th:href="${'/organisation/create/selected-business/'+ company.companyNumber}" title="View company" th:text="${company.name}">
                            </a>
                        </h3>
                        <p class="meta crumbtrail" th:text="${company.description}"></p>
                        <p th:text="${company.location}"></p>
                    </li>
                    <li th:unless="${companyHouseForm.companyHouseList.size()}">
                        <p>Sorry we couldn't find any results within Companies House.<br/> Are you sure you didn't make mistake?</p>
                    </li>
                </ul>
            </fieldset>
            <button type="submit" class="buttonlink" name="not-in-company-house">Not on Companies House?</button>

            <div th:unless="${companyHouseForm.inCompanyHouse}" th:remove="tag">
                <div th:include="create-application/fragments :: organisation-name" th:with="form=${companyHouseForm}" th:remove="tag"></div>
                <div th:include="create-application/fragments :: company-address-details" th:with="form=${companyHouseForm}" th:remove="tag"></div>
                <button type="submit button-large extra-margin" name="confirm-company-details" class="button">Continue</button>
            </div>
        </form>


    <div th:include="fragments/layout :: main-content-end" th:remove="tag"/>
</main>

<div th:include="fragments/layout :: footer" th:remove="tag"/>
<div th:include="fragments/layout :: body-end" th:remove="tag"/>
</body>
</html>
