*** Settings ***
Documentation     INFUND-39 As an applicant and I am on the application overview, I can select a section of the application, so I can see the status of each subsection in this section
Suite Setup       Login as User    &{lead_applicant_credentials}
Suite Teardown    TestTeardown User closes the browser
Resource          ../../../resources/GLOBAL_LIBRARIES.robot
Resource          ../../../resources/variables/GLOBAL_VARIABLES.robot
Resource          ../../../resources/variables/User_credentials.robot
Resource          ../../../resources/keywords/Login_actions.robot
Resource          ../../../resources/keywords/Applicant_actions.robot

*** Test Cases ***
Verify the questions status for the "Application details" section
    [Documentation]    INFUND-39
    [Tags]    Applicant
    Given Applicant goes to the Application form
    When the Applicant edits the "Project summary" question
    and the applicant assigns the "Project Summary" question to Jessica Doe    Jessica Doe
    # Then the "last update" date should be correct for the "Project summary" question
    and the "assign to" should be correct for the "Project summary" question

Verify the question status for the "Scope" section
    [Documentation]    INFUND-39
    [Tags]    Applicant
    Given Applicant goes to the Scope section
    When the Applicant edits the "Scope" question
    and the applicant assigns the "Scope" question to Jessica Doe    Jessica Doe
    #Then the "last update" date should be correct for the "Scope" question
    and the "assign to" should be correct for the "Scope" question

Verify the question status for the "Your business proposition" section
    [Documentation]    INFUND-39
    [Tags]    Applicant
    Given Applicant goes to the Application questions section
    When the Applicant edits the question 1
    and the applicant assigns the question 1 to Jessica Doe    Jessica Doe
    #Then the "last update" date should be correct for the question 1
    and the "assign to" should be correct for the question 1

Verify the question status for the "Your approach to the project" section
    [Documentation]    INFUND-39
    [Tags]    Applicant
    Given Applicant goes to the "Your approach..." section
    When the Applicant edits question 5
    and the applicant assigns question 5 to Jessica Doe    Jessica Doe
    #Then the "last update" date should be correct for the question 5
    and the "assign to" should be correct for the question 5

Verify the question status for the "Funding" section
    [Documentation]    INFUND-39
    [Tags]    Applicant
    Given Applicant goes to the "Funding" section
    When the Applicant edits question 9
    and the applicant assigns question 9 to Jessica Doe    Jessica Doe
    #Then the "last update" date should be correct for the question 9
    and the "assign to" should be correct for the question 9

Verify the blue flag when the question is assigned to the applicant
    [Documentation]    INFUND-39
    [Tags]    Applicant
    Given Applicant goes to the application form
    When the applicant assigns the "Project summary" question to "Steve Smith"    Steve Smith
    #Then the applicant should see a blue flag in the Application details section(overview page)
    And the applicant should see a blue flag in the Public description (overview page)

*** Keywords ***
the Applicant edits the "Project summary" question
    Clear Element Text    css=#form-input-11 .editor
    Input Text    css=#form-input-11 .editor    Check last updated date@#$
    Focus    css=.app-submit-btn
    Sleep    2s

the applicant assigns the "Project Summary" question to Jessica Doe
    [Arguments]    ${assignee_name}
    Click Element    css=#form-input-11 .assign-button button
    Click Element    xpath=//*[@id="0"]//button[contains(text(),"${assignee_name}")]

the "last update" date should be correct for the "Project summary" question
    Go To    ${APPLICATION_OVERVIEW_URL}
    #Click Button    css=#section-1 > button
    Page Should Contain Element    css=#form-input-11 .column-two-thirds small
    Element Should Contain    css=#form-input-11 .column-two-thirds small    Last updated: Today by you

the "assign to" should be correct for the "Project summary" question
    Go To    ${APPLICATION_OVERVIEW_URL}
    Page Should Contain Element    css=#form-input-11 .column-third button strong
    Element Should Contain    css=#form-input-11 .column-third button strong    Jessica Doe

the Applicant edits the "Scope" question
    Clear Element Text    css=#form-input-13 .editor
    Input Text    css=#form-input-13 .editor    test text 123

the applicant assigns the "Scope" question to Jessica Doe
    [Arguments]    ${assignee_name}
    Click Element    css=#form-input-13 .assign-button button
    Click Element    xpath=//*[@id="0"]//button[contains(text(),"${assignee_name}")]

the "last update" date should be correct for the "Scope" question
    Go To    ${APPLICATION_OVERVIEW_URL}
    click button    css=#section-2 > button
    Page Should Contain Element    css=#form-input-13 .column-two-thirds small
    Element Should Contain    css=#form-input-13 .column-two-thirds small    Last updated: Today by you

the "assign to" should be correct for the "Scope" question
    Go To    ${APPLICATION_OVERVIEW_URL}
    Page Should Contain Element    css=#form-input-13 .column-third button strong
    Element Should Contain    css=#form-input-13 .column-third button strong    Jessica Doe

the Applicant edits the question 1
    Clear Element Text    css=#form-input-1 .editor
    Input Text    css=#form-input-1 .editor    Check last updated date@#$
    Focus    css=.app-submit-btn
    Sleep    2s

the applicant assigns the question 1 to Jessica Doe
    [Arguments]    ${assignee_name}
    Click Element    css=#form-input-1 .assign-button button
    Click Element    xpath=//*[@id="0"]//button[contains(text(),"${assignee_name}")]

the "last update" date should be correct for the question 1
    Go To    ${APPLICATION_OVERVIEW_URL}
    Click Button    css=#section-3 > button
    Page Should Contain Element    css=#form-input-1 .column-two-thirds small
    Element Should Contain    css=#form-input-1 .column-two-thirds small    Last updated: Today by you

the "assign to" should be correct for the question 1
    Go To    ${APPLICATION_OVERVIEW_URL}
    Page Should Contain Element    css=#form-input-1 .column-third button strong
    Element Should Contain    css=#form-input-1 .column-third button strong    Jessica Doe

the Applicant edits question 5
    Clear Element Text    css=#form-input-5 .editor
    Input Text    css=#form-input-5 .editor    Check last updated date@#$
    Focus    css=.app-submit-btn
    Sleep    2s

the applicant assigns question 5 to Jessica Doe
    [Arguments]    ${assignee_name}
    Click Element    css=#form-input-5 .assign-button button
    Click Element    xpath=//*[@id="0"]//button[contains(text(),"${assignee_name}")]

the "last update" date should be correct for the question 5
    Go To    ${APPLICATION_OVERVIEW_URL}
    Click Button    css=#section-4 > button
    Page Should Contain Element    css=#form-input-5 .column-two-thirds small
    Element Should Contain    css=#form-input-5 .column-two-thirds small    Last updated: Today by you

the "assign to" should be correct for the question 5
    Go To    ${APPLICATION_OVERVIEW_URL}
    Page Should Contain Element    css=#form-input-5 .column-third button strong
    Element Should Contain    css=#form-input-5 .column-third button strong    Jessica Doe

the Applicant edits question 9
    Clear Element Text    css=#form-input-15 .editor
    Input Text    css=#form-input-15 .editor    Check last updated date@#$
    Focus    css=.app-submit-btn
    Sleep    2s

the applicant assigns question 9 to Jessica Doe
    [Arguments]    ${assignee_name}
    Click Element    css=#form-input-15 .assign-button button
    Click Element    xpath=//*[@id="0"]//button[contains(text(),"${assignee_name}")]

the "last update" date should be correct for the question 9
    Go To    ${APPLICATION_OVERVIEW_URL}
    Click Button    css=#section-5 > button
    Page Should Contain Element    css=#form-input-15 .column-two-thirds small
    Element Should Contain    css=#form-input-15 .column-two-thirds small    Last updated: Today by you

the "assign to" should be correct for the question 9
    Go To    ${APPLICATION_OVERVIEW_URL}
    Page Should Contain Element    css=#form-input-15 .column-third button strong
    Element Should Contain    css=#form-input-15 .column-third button strong    Jessica Doe

the applicant assigns the "Project summary" question to "Steve Smith"
    [Arguments]    ${assignee_name}
    Click Element    css=#form-input-11 .assign-button button
    Click Element    xpath=//*[@id="0"]//button[contains(text(),"${assignee_name}")]

the applicant should see a blue flag in the Application details section(overview page)
    Applicant goes to the overview page
    Element Should Be Visible    css=#form-input-11 .assigned-to-me

the applicant should see a blue flag in the Public description (overview page)
    #Click Element    css=#section-1
    Element Should Be Visible    css=#form-input-11 .assigned-to-me
