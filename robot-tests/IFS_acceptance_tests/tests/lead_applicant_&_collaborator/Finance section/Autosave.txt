*** Settings ***
Documentation     INFUND-45: As an applicant and I am on the application form on an open application, I expect the form to help me fill in financial details, so I can have a clear overview and less chance of making mistakes.
Suite Setup       Login as User    &{lead_applicant_credentials}
Suite Teardown    TestTeardown User closes the browser
Resource          ../../../resources/GLOBAL_LIBRARIES.robot
Resource          ../../../resources/variables/GLOBAL_VARIABLES.robot
Resource          ../../../resources/variables/User_credentials.robot
Resource          ../../../resources/keywords/Login_actions.robot
Resource          ../../../resources/keywords/Applicant_actions.robot

*** variables ***
${APPLICANT_USERNAME}    applicant@innovateuk.gov.uk
${APPLICANT_PSW}    test

*** Test Cases ***
Verify auto the auto-save of the "Grant" field
    [Tags]    Applicant    Autosave    Finance
    Given the applicant is in the Finance section
    Then auto-save should work for the "Grant" field
    and the grant value should be correct in the finance summary page

*** Keywords ***
the grant value should be correct in the finance summary page
    Click Link    link=Project financial summary
    Element Should Contain    css=.form-group > table tr:nth-child(2) .numeric:nth-child(3)    25

auto-save should work for the "Grant" field
    Clear Element Text    css=#cost-financegrantclaim
    focus    css=.column-half:nth-child(1) .button-block
    Sleep    1s
    Reload Page
    ${input_value} =    Get Value    id=cost-financegrantclaim
    Should Be Equal As Strings    ${input_value}    0
    Clear Element Text    id=cost-financegrantclaim
    Input Text    id=cost-financegrantclaim    25
    focus    css=.column-half:nth-child(1) .button-block
    Sleep    1s
    Reload Page
    focus    css=.column-half:nth-child(1) .button-block
    ${input_value} =    Get Value    id=cost-financegrantclaim
    Should Be Equal As Strings    ${input_value}    25
